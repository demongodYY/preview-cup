{"version":3,"sources":["webpack:///static/js/app.1558ea0e10c9386aa36c.js","webpack:///./src/model/layout-list.json","webpack:///./src/model/bg-list.json","webpack:///./src/components/canvas.vue","webpack:///./src/components/preview.vue","webpack:///./src/components/cup.vue","webpack:///./src/App.vue","webpack:///src/components/canvas.vue","webpack:///./src/components/canvas.vue?0e71","webpack:///src/components/preview.vue","webpack:///./src/components/preview.vue?c4ee","webpack:///src/components/cup.vue","webpack:///./src/components/cup.vue?71bc","webpack:///src/App.vue","webpack:///./src/App.vue?1ea6","webpack:///./src/main.js"],"names":["webpackJsonp","/IO3","module","exports","name","url","EjwQ","H9h6","NHnr","__webpack_exports__","__webpack_require__","injectStyle","ssrContext","preview_injectStyle","cup_injectStyle","App_injectStyle","Object","defineProperty","value","vue_esm","element_ui_common","element_ui_common_default","n","konva","konva_default","canvas","data","textShow","layer","methods","saveImage","dataUrl","toDataURL","this","$root","bus","$emit","inputText","text","_this","textarea","$refs","textPosition","position","style","fontSize","fontFamily","width","height","top","y","left","x","addEventListener","e","keyCode","draw","drawImage","_this2","imgObj","Image","src","onload","img","a","image","getWidth","draggable","group","Group","clipFunc","ctx","arc","Math","PI","add","uploadImage","_this3","fileUp","document","getElementById","onchange","fr","FileReader","target","result","readAsDataURL","files","addShapes","_this4","circle","Circle","radius","stroke","strokeWidth","Text","on","mounted","_this5","stage","Stage","container","bgLayer","Layer","$on","find","destroy","bgImgObj","moveToBottom","render","_vm","_h","$createElement","_c","_self","attrs","id","directives","rawName","expression","ref","autofocus","_v","type","plain","disabled","staticRenderFns","esExports","components_canvas","normalizeComponent","__vue_styles__","Component","src_components_canvas","three_module","preview","scene","camera","renderer","initScene","background","clientWidth","window","innerHeight","setSize","appendChild","domElement","renderCup","cylinderGeo","texture","load","tex","cylinderMat","map","needsUpdate","cylinderMesh","z","animate","requestAnimationFrame","rotation","updateTexture","mesh","material","preview_render","staticClass","preview_staticRenderFns","preview_esExports","components_preview","preview_normalizeComponent","preview___vue_styles__","preview_Component","src_components_preview","bl","ll","cup","components","myCanvas","changeBackground","index","bgUrl","bgList","bgListVisible","beforeMount","layoutList","layoutListVisible","cup_render","placement","trigger","model","callback","$$v","gutter","_l","item","key","span","click","$event","alt","arg","cup_staticRenderFns","cup_esExports","components_cup","cup_normalizeComponent","cup___vue_styles__","cup_Component","src_components_cup","App","App_render","App_staticRenderFns","App_esExports","selectortype_template_index_0_src_App","App_normalizeComponent","App___vue_styles__","App_Component","src_App","config","productionTip","use","el","template","cff8","jSAi","qH7m","rK6t"],"mappings":"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","file":"static/js/app.1558ea0e10c9386aa36c.js","sourcesContent":["webpackJsonp([1],{\n\n/***/ \"/IO3\":\n/***/ (function(module, exports) {\n\nmodule.exports = [{\"name\":\"layout1\",\"url\":\"./static/img/layout1.png\"},{\"name\":\"layout2\",\"url\":\"./static/img/layout2.png\"},{\"name\":\"layout3\",\"url\":\"./static/img/layout3.png\"}]\n\n/***/ }),\n\n/***/ \"EjwQ\":\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ \"H9h6\":\n/***/ (function(module, exports) {\n\nmodule.exports = [{\"name\":\"background1\",\"url\":\"./static/img/bg1.png\"},{\"name\":\"background2\",\"url\":\"./static/img/bg2.png\"}]\n\n/***/ }),\n\n/***/ \"NHnr\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n\n// EXTERNAL MODULE: ./node_modules/_vue@2.5.8@vue/dist/vue.esm.js\nvar vue_esm = __webpack_require__(\"TWX9\");\n\n// EXTERNAL MODULE: ./node_modules/_element-ui@2.0.5@element-ui/lib/element-ui.common.js\nvar element_ui_common = __webpack_require__(\"z5U/\");\nvar element_ui_common_default = /*#__PURE__*/__webpack_require__.n(element_ui_common);\n\n// EXTERNAL MODULE: ./node_modules/_element-ui@2.0.5@element-ui/lib/theme-chalk/index.css\nvar theme_chalk = __webpack_require__(\"rK6t\");\nvar theme_chalk_default = /*#__PURE__*/__webpack_require__.n(theme_chalk);\n\n// EXTERNAL MODULE: ./node_modules/_konva@1.7.6@konva/konva.js\nvar konva = __webpack_require__(\"S3zW\");\nvar konva_default = /*#__PURE__*/__webpack_require__.n(konva);\n\n// CONCATENATED MODULE: ./node_modules/_babel-loader@7.1.2@babel-loader/lib!./node_modules/_vue-loader@13.5.0@vue-loader/lib/selector.js?type=script&index=0!./src/components/canvas.vue\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\n\n/* harmony default export */ var canvas = ({\n  name: 'cupCanvas',\n  data: function data() {\n    return {\n      textShow: false,\n      layer: ''\n    };\n  },\n\n  methods: {\n    saveImage: function saveImage(layer) {\n      var dataUrl = layer.toDataURL();\n      this.$root.bus.$emit('canvasChange', dataUrl);\n    },\n    inputText: function inputText(text) {\n      var _this = this;\n\n      var textarea = this.$refs.textarea;\n      var textPosition = text.position();\n      textarea.value = text.text();\n      textarea.style.position = 'absolute';\n      textarea.style.fontSize = text.fontSize() + 'px';\n      textarea.style.fontFamily = text.fontFamily();\n      textarea.style.width = text.width() + 'px';\n      textarea.style.height = text.height() + 'px';\n      textarea.style.top = textPosition.y + 'px';\n      textarea.style.left = textPosition.x + 'px';\n      textarea.style['z-index'] = 1;\n      this.textShow = true;\n      textarea.addEventListener('keydown', function (e) {\n        if (e.keyCode === 13) {\n          text.text(textarea.value);\n          _this.layer.draw();\n          _this.textShow = false;\n          _this.saveImage(_this.layer);\n        }\n      });\n    },\n    drawImage: function drawImage(dataUrl) {\n      var _this2 = this;\n\n      var imgObj = new Image();\n      imgObj.src = dataUrl;\n      imgObj.onload = function () {\n        var img = new konva_default.a.Image({\n          name: 'img',\n          image: imgObj,\n          width: 200,\n          height: 200,\n          x: _this2.layer.getWidth() / 2 - 100,\n          y: 100,\n          draggable: true\n        });\n        var group = new konva_default.a.Group({\n          clipFunc: function clipFunc(ctx) {\n            ctx.arc(_this2.layer.getWidth() / 2, 200, 100, 0, Math.PI * 2);\n          }\n        });\n        group.add(img);\n        _this2.layer.add(group);\n        _this2.layer.draw();\n        _this2.saveImage(_this2.layer);\n      };\n    },\n    uploadImage: function uploadImage() {\n      var _this3 = this;\n\n      var fileUp = document.getElementById('fileup');\n      fileUp.onchange = function () {\n        var fr = new FileReader();\n        fr.onload = function (e) {\n          _this3.drawImage(e.target.result);\n        };\n        fr.readAsDataURL(fileUp.files[0]);\n      };\n    },\n    addShapes: function addShapes() {\n      var _this4 = this;\n\n      var circle = new konva_default.a.Circle({\n        x: this.layer.getWidth() / 2,\n        y: 200,\n        radius: 100,\n        stroke: 'blue',\n        strokeWidth: 1\n      });\n      var text = new konva_default.a.Text({\n        x: this.layer.getWidth() / 2 - 100,\n        y: 400,\n        width: 200,\n        height: 100,\n        stroke: 'blue',\n        strokeWidth: 1,\n        text: 'Hello World!',\n        fontSize: 30,\n        fontFamily: 'Calibri'\n      });\n      text.on('click', function () {\n        _this4.inputText(text);\n      });\n      this.layer.add(circle);\n      this.layer.add(text);\n      this.layer.draw();\n    }\n  },\n  mounted: function mounted() {\n    var _this5 = this;\n\n    var stage = new konva_default.a.Stage({\n      container: 'myCanvas',\n      width: 800,\n      height: 600\n    });\n    var bgLayer = new konva_default.a.Layer();\n    this.layer = bgLayer;\n    stage.add(bgLayer);\n    this.$root.bus.$on('bgChange', function (text) {\n      bgLayer.find('.background').destroy();\n      var bgImgObj = new Image();\n      bgImgObj.src = text;\n      bgImgObj.onload = function () {\n        var img = new konva_default.a.Image({\n          name: 'background',\n          image: bgImgObj\n        });\n        bgLayer.add(img);\n        img.moveToBottom();\n        bgLayer.draw();\n        _this5.saveImage(_this5.layer);\n      };\n    });\n    this.addShapes();\n    this.uploadImage();\n  }\n});\n// CONCATENATED MODULE: ./node_modules/_vue-loader@13.5.0@vue-loader/lib/template-compiler?{\"id\":\"data-v-57e4a857\",\"hasScoped\":true,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.5.0@vue-loader/lib/selector.js?type=template&index=0!./src/components/canvas.vue\nvar render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"container\"}},[_c('textarea',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.textShow),expression:\"textShow\"}],ref:\"textarea\",attrs:{\"autofocus\":\"\"}}),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"myCanvas\"}}),_vm._v(\" \"),_c('input',{attrs:{\"type\":\"file\",\"id\":\"fileup\"}}),_vm._v(\" \"),_c('el-button',{attrs:{\"plain\":\"\",\"disabled\":\"\"}},[_vm._v(\"上一步\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"plain\":\"\",\"disabled\":\"\"}},[_vm._v(\"下一步\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"plain\":\"\",\"disabled\":\"\"}},[_vm._v(\"清空重做\")])],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\n/* harmony default export */ var components_canvas = (esExports);\n// CONCATENATED MODULE: ./src/components/canvas.vue\nfunction injectStyle (ssrContext) {\n  __webpack_require__(\"qH7m\")\n}\nvar normalizeComponent = __webpack_require__(\"/Xao\")\n/* script */\n\n/* template */\n\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-57e4a857\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  canvas,\n  components_canvas,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\n/* harmony default export */ var src_components_canvas = (Component.exports);\n\n// EXTERNAL MODULE: ./node_modules/_three@0.88.0@three/build/three.module.js\nvar three_module = __webpack_require__(\"Lsr5\");\n\n// CONCATENATED MODULE: ./node_modules/_babel-loader@7.1.2@babel-loader/lib!./node_modules/_vue-loader@13.5.0@vue-loader/lib/selector.js?type=script&index=0!./src/components/preview.vue\n//\n//\n//\n//\n//\n//\n\n\n/* harmony default export */ var preview = ({\n  name: 'preview',\n  data: function data() {\n    return {\n      scene: null,\n      camera: null,\n      renderer: null\n    };\n  },\n\n  methods: {\n    initScene: function initScene() {\n      var container = document.getElementById('p-container');\n      this.scene = new three_module[\"f\" /* Scene */]();\n      this.scene.background = new three_module[\"a\" /* Color */]();\n      this.camera = new three_module[\"e\" /* PerspectiveCamera */](75, container.clientWidth / window.innerHeight, 0.1, 1000);\n      this.renderer = new three_module[\"h\" /* WebGLRenderer */]();\n      this.renderer.setSize(container.clientWidth, window.innerHeight);\n      container.appendChild(this.renderer.domElement);\n    },\n    renderCup: function renderCup() {\n      var _this = this;\n\n      var cylinderGeo = new three_module[\"b\" /* CylinderGeometry */](1, 1, 5, 32);\n      var texture = new three_module[\"g\" /* TextureLoader */]().load('./static/img/bg1.png', function (tex) {\n        var cylinderMat = new three_module[\"d\" /* MeshBasicMaterial */]({\n          map: texture\n        });\n        texture.needsUpdate = true;\n        var cylinderMesh = new three_module[\"c\" /* Mesh */](cylinderGeo, cylinderMat);\n        _this.scene.add(cylinderMesh);\n        _this.camera.position.z = 6;\n        var animate = function animate() {\n          requestAnimationFrame(animate);\n          cylinderMesh.rotation.y += 0.01;\n          _this.renderer.render(_this.scene, _this.camera);\n        };\n        animate();\n        _this.$root.bus.$on('canvasChange', function (url) {\n          _this.updateTexture(cylinderMesh, url);\n        });\n        // setTimeout(() => {\n        //   this.updateTexture(cylinderMesh)\n        // }, 5000)\n      });\n    },\n    updateTexture: function updateTexture(mesh, url) {\n      mesh.material.map = new three_module[\"g\" /* TextureLoader */]().load(url);\n      mesh.material.needsUpdate = true;\n    }\n  },\n  mounted: function mounted() {\n    this.initScene();\n    this.renderCup();\n  }\n});\n// CONCATENATED MODULE: ./node_modules/_vue-loader@13.5.0@vue-loader/lib/template-compiler?{\"id\":\"data-v-942e3e2e\",\"hasScoped\":true,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.5.0@vue-loader/lib/selector.js?type=template&index=0!./src/components/preview.vue\nvar preview_render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"container\",attrs:{\"id\":\"p-container\"}})}\nvar preview_staticRenderFns = []\nvar preview_esExports = { render: preview_render, staticRenderFns: preview_staticRenderFns }\n/* harmony default export */ var components_preview = (preview_esExports);\n// CONCATENATED MODULE: ./src/components/preview.vue\nfunction preview_injectStyle (ssrContext) {\n  __webpack_require__(\"EjwQ\")\n}\nvar preview_normalizeComponent = __webpack_require__(\"/Xao\")\n/* script */\n\n/* template */\n\n/* template functional */\nvar preview___vue_template_functional__ = false\n/* styles */\nvar preview___vue_styles__ = preview_injectStyle\n/* scopeId */\nvar preview___vue_scopeId__ = \"data-v-942e3e2e\"\n/* moduleIdentifier (server only) */\nvar preview___vue_module_identifier__ = null\nvar preview_Component = preview_normalizeComponent(\n  preview,\n  components_preview,\n  preview___vue_template_functional__,\n  preview___vue_styles__,\n  preview___vue_scopeId__,\n  preview___vue_module_identifier__\n)\n\n/* harmony default export */ var src_components_preview = (preview_Component.exports);\n\n// CONCATENATED MODULE: ./node_modules/_babel-loader@7.1.2@babel-loader/lib!./node_modules/_vue-loader@13.5.0@vue-loader/lib/selector.js?type=script&index=0!./src/components/cup.vue\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\n\nvar bl = __webpack_require__(\"H9h6\");\nvar ll = __webpack_require__(\"/IO3\");\n/* harmony default export */ var cup = ({\n  name: 'cup',\n  components: {\n    myCanvas: src_components_canvas,\n    preview: src_components_preview\n  },\n  methods: {\n    changeBackground: function changeBackground(index) {\n      this.bgUrl = this.bgList[index].url;\n      this.bgListVisible = false;\n      this.$root.bus.$emit('bgChange', this.bgUrl);\n    }\n  },\n  beforeMount: function beforeMount() {\n    this.bgList = bl;\n    this.layoutList = ll;\n  },\n  mounted: function mounted() {\n    this.changeBackground(0);\n  },\n  data: function data() {\n    return {\n      bgListVisible: false,\n      bgList: [],\n      bgUrl: '',\n      layoutListVisible: false,\n      layoutList: []\n    };\n  }\n});\n// CONCATENATED MODULE: ./node_modules/_vue-loader@13.5.0@vue-loader/lib/template-compiler?{\"id\":\"data-v-b805e61e\",\"hasScoped\":true,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.5.0@vue-loader/lib/selector.js?type=template&index=0!./src/components/cup.vue\nvar cup_render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"cup\"},[_c('el-popover',{ref:\"bg-popup\",attrs:{\"placement\":\"right\",\"trigger\":\"click\",\"width\":\"400\"},model:{value:(_vm.bgListVisible),callback:function ($$v) {_vm.bgListVisible=$$v},expression:\"bgListVisible\"}},[_c('el-row',{attrs:{\"gutter\":24}},_vm._l((_vm.bgList),function(item,index){return _c('el-col',{key:index,attrs:{\"span\":12}},[_c('el-button',{on:{\"click\":function($event){_vm.changeBackground(index)}}},[_c('img',{attrs:{\"src\":item.url,\"alt\":(\"背景图\" + index)}})])],1)}))],1),_vm._v(\" \"),_c('el-popover',{ref:\"layout-popup\",attrs:{\"placement\":\"right\",\"trigger\":\"click\",\"width\":\"400\"}},[_c('el-row',{attrs:{\"gutter\":24}},_vm._l((_vm.layoutList),function(item,index){return _c('el-col',{key:index,attrs:{\"span\":12}},[_c('el-button',{on:{\"click\":function($event){_vm.changeBackground(index)}}},[_c('img',{attrs:{\"src\":item.url,\"alt\":(\"layout\" + index)}})])],1)}))],1),_vm._v(\" \"),_c('el-container',[_c('el-aside',[_c('ul',[_c('li',[_c('el-button',{directives:[{name:\"popover\",rawName:\"v-popover:bg-popup\",arg:\"bg-popup\"}],attrs:{\"plain\":\"\"}},[_vm._v(\"更换背景\")])],1),_vm._v(\" \"),_c('li',[_c('el-button',{directives:[{name:\"popover\",rawName:\"v-popover:layout-popup\",arg:\"layout-popup\"}],attrs:{\"plain\":\"\",\"disabled\":\"true\"}},[_vm._v(\"更换布局\")])],1)])]),_vm._v(\" \"),_c('el-main',[_c('my-canvas')],1),_vm._v(\" \"),_c('el-aside',[_c('preview')],1)],1)],1)}\nvar cup_staticRenderFns = []\nvar cup_esExports = { render: cup_render, staticRenderFns: cup_staticRenderFns }\n/* harmony default export */ var components_cup = (cup_esExports);\n// CONCATENATED MODULE: ./src/components/cup.vue\nfunction cup_injectStyle (ssrContext) {\n  __webpack_require__(\"cff8\")\n}\nvar cup_normalizeComponent = __webpack_require__(\"/Xao\")\n/* script */\n\n/* template */\n\n/* template functional */\nvar cup___vue_template_functional__ = false\n/* styles */\nvar cup___vue_styles__ = cup_injectStyle\n/* scopeId */\nvar cup___vue_scopeId__ = \"data-v-b805e61e\"\n/* moduleIdentifier (server only) */\nvar cup___vue_module_identifier__ = null\nvar cup_Component = cup_normalizeComponent(\n  cup,\n  components_cup,\n  cup___vue_template_functional__,\n  cup___vue_styles__,\n  cup___vue_scopeId__,\n  cup___vue_module_identifier__\n)\n\n/* harmony default export */ var src_components_cup = (cup_Component.exports);\n\n// CONCATENATED MODULE: ./node_modules/_babel-loader@7.1.2@babel-loader/lib!./node_modules/_vue-loader@13.5.0@vue-loader/lib/selector.js?type=script&index=0!./src/App.vue\n//\n//\n//\n//\n//\n//\n\n\n// import preview from './components/preview'\n\n/* harmony default export */ var App = ({\n  name: 'app',\n  components: {\n    cup: src_components_cup\n  }\n});\n// CONCATENATED MODULE: ./node_modules/_vue-loader@13.5.0@vue-loader/lib/template-compiler?{\"id\":\"data-v-bee39478\",\"hasScoped\":false,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.5.0@vue-loader/lib/selector.js?type=template&index=0!./src/App.vue\nvar App_render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('cup')],1)}\nvar App_staticRenderFns = []\nvar App_esExports = { render: App_render, staticRenderFns: App_staticRenderFns }\n/* harmony default export */ var selectortype_template_index_0_src_App = (App_esExports);\n// CONCATENATED MODULE: ./src/App.vue\nfunction App_injectStyle (ssrContext) {\n  __webpack_require__(\"jSAi\")\n}\nvar App_normalizeComponent = __webpack_require__(\"/Xao\")\n/* script */\n\n/* template */\n\n/* template functional */\nvar App___vue_template_functional__ = false\n/* styles */\nvar App___vue_styles__ = App_injectStyle\n/* scopeId */\nvar App___vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar App___vue_module_identifier__ = null\nvar App_Component = App_normalizeComponent(\n  App,\n  selectortype_template_index_0_src_App,\n  App___vue_template_functional__,\n  App___vue_styles__,\n  App___vue_scopeId__,\n  App___vue_module_identifier__\n)\n\n/* harmony default export */ var src_App = (App_Component.exports);\n\n// CONCATENATED MODULE: ./src/main.js\n// The Vue build version to load with the `import` command\n// (runtime-only or standalone) has been set in webpack.base.conf with an alias.\n\n\n\n\n\nvue_esm[\"default\"].config.productionTip = false;\nvue_esm[\"default\"].use(element_ui_common_default.a);\n/* eslint-disable no-new */\nnew vue_esm[\"default\"]({\n  el: '#app',\n  template: '<App/>',\n  components: { App: src_App },\n  data: {\n    bus: new vue_esm[\"default\"]()\n  }\n});\n\n/***/ }),\n\n/***/ \"cff8\":\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ \"jSAi\":\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ \"qH7m\":\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ \"rK6t\":\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ })\n\n},[\"NHnr\"]);\n\n\n// WEBPACK FOOTER //\n// static/js/app.1558ea0e10c9386aa36c.js","module.exports = [{\"name\":\"layout1\",\"url\":\"./static/img/layout1.png\"},{\"name\":\"layout2\",\"url\":\"./static/img/layout2.png\"},{\"name\":\"layout3\",\"url\":\"./static/img/layout3.png\"}]\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/model/layout-list.json\n// module id = /IO3\n// module chunks = 1","module.exports = [{\"name\":\"background1\",\"url\":\"./static/img/bg1.png\"},{\"name\":\"background2\",\"url\":\"./static/img/bg2.png\"}]\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/model/bg-list.json\n// module id = H9h6\n// module chunks = 1","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/_vue-loader@13.5.0@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-57e4a857\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../node_modules/_vue-loader@13.5.0@vue-loader/lib/selector?type=styles&index=0!./canvas.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/_vue-loader@13.5.0@vue-loader/lib/component-normalizer\")\n/* script */\nimport __vue_script__ from \"!!babel-loader!../../node_modules/_vue-loader@13.5.0@vue-loader/lib/selector?type=script&index=0!./canvas.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/_vue-loader@13.5.0@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-57e4a857\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":\\\"src\\\",\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/_vue-loader@13.5.0@vue-loader/lib/selector?type=template&index=0!./canvas.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-57e4a857\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/canvas.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/_vue-loader@13.5.0@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-942e3e2e\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../node_modules/_vue-loader@13.5.0@vue-loader/lib/selector?type=styles&index=0!./preview.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/_vue-loader@13.5.0@vue-loader/lib/component-normalizer\")\n/* script */\nimport __vue_script__ from \"!!babel-loader!../../node_modules/_vue-loader@13.5.0@vue-loader/lib/selector?type=script&index=0!./preview.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/_vue-loader@13.5.0@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-942e3e2e\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":\\\"src\\\",\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/_vue-loader@13.5.0@vue-loader/lib/selector?type=template&index=0!./preview.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-942e3e2e\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/preview.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/_vue-loader@13.5.0@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-b805e61e\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../node_modules/_vue-loader@13.5.0@vue-loader/lib/selector?type=styles&index=0!./cup.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/_vue-loader@13.5.0@vue-loader/lib/component-normalizer\")\n/* script */\nimport __vue_script__ from \"!!babel-loader!../../node_modules/_vue-loader@13.5.0@vue-loader/lib/selector?type=script&index=0!./cup.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/_vue-loader@13.5.0@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-b805e61e\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":\\\"src\\\",\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/_vue-loader@13.5.0@vue-loader/lib/selector?type=template&index=0!./cup.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-b805e61e\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/cup.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../node_modules/_vue-loader@13.5.0@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-bee39478\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../node_modules/_vue-loader@13.5.0@vue-loader/lib/selector?type=styles&index=0!./App.vue\")\n}\nvar normalizeComponent = require(\"!../node_modules/_vue-loader@13.5.0@vue-loader/lib/component-normalizer\")\n/* script */\nimport __vue_script__ from \"!!babel-loader!../node_modules/_vue-loader@13.5.0@vue-loader/lib/selector?type=script&index=0!./App.vue\"\n/* template */\nimport __vue_template__ from \"!!../node_modules/_vue-loader@13.5.0@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-bee39478\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":\\\"src\\\",\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../node_modules/_vue-loader@13.5.0@vue-loader/lib/selector?type=template&index=0!./App.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/App.vue\n// module id = null\n// module chunks = ","<template>\r\n  <div id=\"container\">\r\n      <textarea\r\n        ref=\"textarea\"\r\n        autofocus\r\n        v-show=\"textShow\">\r\n    </textarea>\r\n    <div id=\"myCanvas\">\r\n    </div>\r\n    <input type=\"file\" id=\"fileup\"/>\r\n    <el-button plain disabled>上一步</el-button>\r\n    <el-button plain disabled>下一步</el-button>\r\n    <el-button plain disabled>清空重做</el-button>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Konva from 'konva'\r\n\r\nexport default {\r\n  name: 'cupCanvas',\r\n  data () {\r\n    return {\r\n      textShow: false,\r\n      layer: ''\r\n    }\r\n  },\r\n  methods: {\r\n    saveImage (layer) {\r\n      const dataUrl = layer.toDataURL()\r\n      this.$root.bus.$emit('canvasChange', dataUrl)\r\n    },\r\n    inputText (text) {\r\n      const textarea = this.$refs.textarea\r\n      const textPosition = text.position()\r\n      textarea.value = text.text()\r\n      textarea.style.position = 'absolute'\r\n      textarea.style.fontSize = `${text.fontSize()}px`\r\n      textarea.style.fontFamily = text.fontFamily()\r\n      textarea.style.width = `${text.width()}px`\r\n      textarea.style.height = `${text.height()}px`\r\n      textarea.style.top = textPosition.y + 'px'\r\n      textarea.style.left = textPosition.x + 'px'\r\n      textarea.style['z-index'] = 1\r\n      this.textShow = true\r\n      textarea.addEventListener('keydown', (e) => {\r\n        if (e.keyCode === 13) {\r\n          text.text(textarea.value)\r\n          this.layer.draw()\r\n          this.textShow = false\r\n          this.saveImage(this.layer)\r\n        }\r\n      })\r\n    },\r\n    drawImage (dataUrl) {\r\n      const imgObj = new Image()\r\n      imgObj.src = dataUrl\r\n      imgObj.onload = () => {\r\n        const img = new Konva.Image({\r\n          name: 'img',\r\n          image: imgObj,\r\n          width: 200,\r\n          height: 200,\r\n          x: this.layer.getWidth() / 2 - 100,\r\n          y: 100,\r\n          draggable: true\r\n        })\r\n        const group = new Konva.Group({\r\n          clipFunc: (ctx) => {\r\n            ctx.arc(this.layer.getWidth() / 2, 200, 100, 0, Math.PI * 2)\r\n          }\r\n        })\r\n        group.add(img)\r\n        this.layer.add(group)\r\n        this.layer.draw()\r\n        this.saveImage(this.layer)\r\n      }\r\n    },\r\n    uploadImage () {\r\n      const fileUp = document.getElementById('fileup')\r\n      fileUp.onchange = () => {\r\n        const fr = new FileReader()\r\n        fr.onload = (e) => {\r\n          this.drawImage(e.target.result)\r\n        }\r\n        fr.readAsDataURL(fileUp.files[0])\r\n      }\r\n    },\r\n    addShapes () {\r\n      const circle = new Konva.Circle({\r\n        x: this.layer.getWidth() / 2,\r\n        y: 200,\r\n        radius: 100,\r\n        stroke: 'blue',\r\n        strokeWidth: 1\r\n      })\r\n      const text = new Konva.Text({\r\n        x: (this.layer.getWidth() / 2) - 100,\r\n        y: 400,\r\n        width: 200,\r\n        height: 100,\r\n        stroke: 'blue',\r\n        strokeWidth: 1,\r\n        text: 'Hello World!',\r\n        fontSize: 30,\r\n        fontFamily: 'Calibri'\r\n      })\r\n      text.on('click', () => {\r\n        this.inputText(text)\r\n      })\r\n      this.layer.add(circle)\r\n      this.layer.add(text)\r\n      this.layer.draw()\r\n    }\r\n  },\r\n  mounted () {\r\n    const stage = new Konva.Stage({\r\n      container: 'myCanvas',\r\n      width: 800,\r\n      height: 600\r\n    })\r\n    const bgLayer = new Konva.Layer()\r\n    this.layer = bgLayer\r\n    stage.add(bgLayer)\r\n    this.$root.bus.$on('bgChange', (text) => {\r\n      bgLayer.find('.background').destroy()\r\n      const bgImgObj = new Image()\r\n      bgImgObj.src = text\r\n      bgImgObj.onload = () => {\r\n        const img = new Konva.Image({\r\n          name: 'background',\r\n          image: bgImgObj\r\n        })\r\n        bgLayer.add(img)\r\n        img.moveToBottom()\r\n        bgLayer.draw()\r\n        this.saveImage(this.layer)\r\n      }\r\n    })\r\n    this.addShapes()\r\n    this.uploadImage()\r\n  }\r\n}\r\n</script>\r\n<style scoped>\r\n  #container {\r\n    position: relative;\r\n  }\r\n  #myCanvas {\r\n    position: relative;\r\n  }\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/canvas.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"container\"}},[_c('textarea',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.textShow),expression:\"textShow\"}],ref:\"textarea\",attrs:{\"autofocus\":\"\"}}),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"myCanvas\"}}),_vm._v(\" \"),_c('input',{attrs:{\"type\":\"file\",\"id\":\"fileup\"}}),_vm._v(\" \"),_c('el-button',{attrs:{\"plain\":\"\",\"disabled\":\"\"}},[_vm._v(\"上一步\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"plain\":\"\",\"disabled\":\"\"}},[_vm._v(\"下一步\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"plain\":\"\",\"disabled\":\"\"}},[_vm._v(\"清空重做\")])],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.5.0@vue-loader/lib/template-compiler?{\"id\":\"data-v-57e4a857\",\"hasScoped\":true,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.5.0@vue-loader/lib/selector.js?type=template&index=0!./src/components/canvas.vue\n// module id = null\n// module chunks = ","<template>\r\n  <div id=\"p-container\" class=\"container\">\r\n\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import * as THREE from 'three'\r\n  export default {\r\n    name: 'preview',\r\n    data () {\r\n      return {\r\n        scene: null,\r\n        camera: null,\r\n        renderer: null\r\n      }\r\n    },\r\n    methods: {\r\n      initScene () {\r\n        const container = document.getElementById('p-container')\r\n        this.scene = new THREE.Scene()\r\n        this.scene.background = new THREE.Color()\r\n        this.camera = new THREE.PerspectiveCamera(75, container.clientWidth / window.innerHeight, 0.1, 1000)\r\n        this.renderer = new THREE.WebGLRenderer()\r\n        this.renderer.setSize(container.clientWidth, window.innerHeight)\r\n        container.appendChild(this.renderer.domElement)\r\n      },\r\n      renderCup () {\r\n        const cylinderGeo = new THREE.CylinderGeometry(1, 1, 5, 32)\r\n        const texture = new THREE.TextureLoader().load('./static/img/bg1.png', (tex) => {\r\n          const cylinderMat = new THREE.MeshBasicMaterial({\r\n            map: texture\r\n          })\r\n          texture.needsUpdate = true\r\n          const cylinderMesh = new THREE.Mesh(cylinderGeo, cylinderMat)\r\n          this.scene.add(cylinderMesh)\r\n          this.camera.position.z = 6\r\n          const animate = () => {\r\n            requestAnimationFrame(animate)\r\n            cylinderMesh.rotation.y += 0.01\r\n            this.renderer.render(this.scene, this.camera)\r\n          }\r\n          animate()\r\n          this.$root.bus.$on('canvasChange', (url) => {\r\n            this.updateTexture(cylinderMesh, url)\r\n          })\r\n          // setTimeout(() => {\r\n          //   this.updateTexture(cylinderMesh)\r\n          // }, 5000)\r\n        })\r\n      },\r\n      updateTexture (mesh, url) {\r\n        mesh.material.map = new THREE.TextureLoader().load(url)\r\n        mesh.material.needsUpdate = true\r\n      }\r\n    },\r\n    mounted () {\r\n      this.initScene()\r\n      this.renderCup()\r\n    }\r\n  }\r\n</script>\r\n\r\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\r\n<style scoped>\r\n  div#p-container {\r\n    width: 100%;\r\n    height: 100%;\r\n  }\r\n  canvas { \r\n    width: 100%; \r\n    height: 100%; \r\n  }\r\n</style>\n\n\n// WEBPACK FOOTER //\n// src/components/preview.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"container\",attrs:{\"id\":\"p-container\"}})}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.5.0@vue-loader/lib/template-compiler?{\"id\":\"data-v-942e3e2e\",\"hasScoped\":true,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.5.0@vue-loader/lib/selector.js?type=template&index=0!./src/components/preview.vue\n// module id = null\n// module chunks = ","<template>\r\n  <div class=\"cup\">\r\n    <el-popover ref=\"bg-popup\" placement= \"right\" trigger= \"click\" width=\"400\" v-model=\"bgListVisible\">\r\n      <el-row :gutter=\"24\">\r\n        <el-col :span=\"12\" v-for=\"(item, index) in bgList\" :key=\"index\">\r\n          <el-button @click=\"changeBackground(index)\">\r\n            <img :src=\"item.url\" :alt=\"`背景图${index}`\">\r\n          </el-button>\r\n        </el-col>\r\n      </el-row>\r\n    </el-popover>\r\n    <el-popover ref=\"layout-popup\" placement= \"right\" trigger= \"click\" width=\"400\">\r\n      <el-row :gutter=\"24\">\r\n        <el-col :span=\"12\" v-for=\"(item, index) in layoutList\" :key=\"index\">\r\n          <el-button @click=\"changeBackground(index)\">\r\n            <img :src=\"item.url\" :alt=\"`layout${index}`\">\r\n          </el-button>\r\n        </el-col>\r\n      </el-row>\r\n    </el-popover>\r\n    <el-container>\r\n      <el-aside>\r\n        <ul>\r\n          <li>\r\n            <el-button plain v-popover:bg-popup>更换背景</el-button>\r\n          </li>\r\n          <li>\r\n            <el-button plain v-popover:layout-popup disabled=\"true\">更换布局</el-button>\r\n          </li>\r\n        </ul>\r\n      </el-aside>\r\n      <el-main>\r\n        <my-canvas></my-canvas>\r\n      </el-main>\r\n      <el-aside>\r\n        <preview />\r\n        <!-- <img src=\"/static/img/tervis2.png\" alt=\"杯子\"> -->\r\n      </el-aside>\r\n    </el-container>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import myCanvas from './canvas'\r\n  import preview from './preview'\r\n  const bl = require('../model/bg-list.json')\r\n  const ll = require('../model/layout-list.json')\r\n  export default {\r\n    name: 'cup',\r\n    components: {\r\n      myCanvas,\r\n      preview\r\n    },\r\n    methods: {\r\n      changeBackground (index) {\r\n        this.bgUrl = this.bgList[index].url\r\n        this.bgListVisible = false\r\n        this.$root.bus.$emit('bgChange', this.bgUrl)\r\n      }\r\n    },\r\n    beforeMount () {\r\n      this.bgList = bl\r\n      this.layoutList = ll\r\n    },\r\n    mounted () {\r\n      this.changeBackground(0)\r\n    },\r\n    data () {\r\n      return {\r\n        bgListVisible: false,\r\n        bgList: [],\r\n        bgUrl: '',\r\n        layoutListVisible: false,\r\n        layoutList: []\r\n      }\r\n    }\r\n  }\r\n</script>\r\n\r\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\r\n<style scoped>\r\n  li {\r\n    list-style-type: none;\r\n  }\r\n  img {\r\n    width: 100%;\r\n    height: auto;\r\n  }\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/cup.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"cup\"},[_c('el-popover',{ref:\"bg-popup\",attrs:{\"placement\":\"right\",\"trigger\":\"click\",\"width\":\"400\"},model:{value:(_vm.bgListVisible),callback:function ($$v) {_vm.bgListVisible=$$v},expression:\"bgListVisible\"}},[_c('el-row',{attrs:{\"gutter\":24}},_vm._l((_vm.bgList),function(item,index){return _c('el-col',{key:index,attrs:{\"span\":12}},[_c('el-button',{on:{\"click\":function($event){_vm.changeBackground(index)}}},[_c('img',{attrs:{\"src\":item.url,\"alt\":(\"背景图\" + index)}})])],1)}))],1),_vm._v(\" \"),_c('el-popover',{ref:\"layout-popup\",attrs:{\"placement\":\"right\",\"trigger\":\"click\",\"width\":\"400\"}},[_c('el-row',{attrs:{\"gutter\":24}},_vm._l((_vm.layoutList),function(item,index){return _c('el-col',{key:index,attrs:{\"span\":12}},[_c('el-button',{on:{\"click\":function($event){_vm.changeBackground(index)}}},[_c('img',{attrs:{\"src\":item.url,\"alt\":(\"layout\" + index)}})])],1)}))],1),_vm._v(\" \"),_c('el-container',[_c('el-aside',[_c('ul',[_c('li',[_c('el-button',{directives:[{name:\"popover\",rawName:\"v-popover:bg-popup\",arg:\"bg-popup\"}],attrs:{\"plain\":\"\"}},[_vm._v(\"更换背景\")])],1),_vm._v(\" \"),_c('li',[_c('el-button',{directives:[{name:\"popover\",rawName:\"v-popover:layout-popup\",arg:\"layout-popup\"}],attrs:{\"plain\":\"\",\"disabled\":\"true\"}},[_vm._v(\"更换布局\")])],1)])]),_vm._v(\" \"),_c('el-main',[_c('my-canvas')],1),_vm._v(\" \"),_c('el-aside',[_c('preview')],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.5.0@vue-loader/lib/template-compiler?{\"id\":\"data-v-b805e61e\",\"hasScoped\":true,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.5.0@vue-loader/lib/selector.js?type=template&index=0!./src/components/cup.vue\n// module id = null\n// module chunks = ","<template>\r\n  <div id=\"app\">\r\n    <cup />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport cup from './components/cup'\r\n// import preview from './components/preview'\r\n\r\nexport default {\r\n  name: 'app',\r\n  components: {\r\n    cup\r\n  }\r\n}\r\n</script>\r\n\r\n<style>\r\n#app {\r\n  font-family: 'Avenir', Helvetica, Arial, sans-serif;\r\n  -webkit-font-smoothing: antialiased;\r\n  -moz-osx-font-smoothing: grayscale;\r\n  text-align: center;\r\n  color: #2c3e50;\r\n  margin-top: 60px;\r\n}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/App.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('cup')],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.5.0@vue-loader/lib/template-compiler?{\"id\":\"data-v-bee39478\",\"hasScoped\":false,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.5.0@vue-loader/lib/selector.js?type=template&index=0!./src/App.vue\n// module id = null\n// module chunks = ","// The Vue build version to load with the `import` command\r\n// (runtime-only or standalone) has been set in webpack.base.conf with an alias.\r\nimport Vue from 'vue'\r\nimport ElementUI from 'element-ui'\r\nimport 'element-ui/lib/theme-chalk/index.css'\r\nimport App from './App'\r\n\r\nVue.config.productionTip = false\r\nVue.use(ElementUI)\r\n/* eslint-disable no-new */\r\nnew Vue({\r\n  el: '#app',\r\n  template: '<App/>',\r\n  components: { App },\r\n  data: {\r\n    bus: new Vue()\r\n  }\r\n})\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.js"],"sourceRoot":""}