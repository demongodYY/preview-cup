{"version":3,"sources":["webpack:///static/js/app.c6b515e49ee083c21a2f.js","webpack:///./src/model/layout-list.json","webpack:///./src/model/bg-list.json","webpack:///./src/components/canvas.vue","webpack:///./src/components/preview.vue","webpack:///./src/components/cup.vue","webpack:///./src/App.vue","webpack:///src/components/canvas.vue","webpack:///./src/components/canvas.vue?5a39","webpack:///src/components/preview.vue","webpack:///./src/components/preview.vue?a163","webpack:///src/components/cup.vue","webpack:///./src/components/cup.vue?a22a","webpack:///src/App.vue","webpack:///./src/App.vue?1ea6","webpack:///./src/main.js"],"names":["webpackJsonp","/IO3","module","exports","name","url","layout","img","type","x","y","r","text","width","height","rotation","H9h6","NHnr","__webpack_exports__","__webpack_require__","injectStyle","ssrContext","preview_injectStyle","cup_injectStyle","App_injectStyle","Object","defineProperty","value","vue_esm","element_ui_common","element_ui_common_default","n","object_assign","assign_default","konva","konva_default","canvas","data","textShow","inputUrl","layer","stage","dialogVisible","currentGroup","fontStyle","fontFamily","fontSize","textAlign","color","fontFamilys","images","methods","saveImage","dataUrl","this","toDataURL","$root","bus","$emit","changeTextStyle","textarea","$refs","style","printText","strSize","numSize","Number","substring","length","align","stroke","draw","inputText","_this","textPosition","position","top","left","addEventListener","e","keyCode","drawImage","_this2","shape","sWidth","sHeight","pX","pY","findOne","size","imgObj","Image","src","onload","a","image","draggable","add","uploadImage","_this3","fileUp","document","getElementById","fr","FileReader","push","target","result","readAsDataURL","files","addImgShapes","_this4","group","Group","clipFunc","ctx","arc","Math","PI","Circle","radius","strokeWidth","translate","rotate","rect","Rect","on","addTextShapes","textObj","_this5","Text","mounted","_this6","Stage","container","bgLayer","Layer","moveToBottom","$on","bgUrl","find","destroy","bgImgObj","removeChildren","map","item","render","_vm","_h","$createElement","_c","_self","attrs","id","title","visible","update:visible","$event","staticClass","_l","index","key","span","round","click","_v","splice","alt","slot","placeholder","model","callback","$$v","expression","icon","accept","change","directives","rawName","placement","ref","autofocus","$set","label","plain","staticRenderFns","esExports","components_canvas","normalizeComponent","__vue_styles__","Component","src_components_canvas","three_module","preview","scene","camera","renderer","initScene","alpha","setPixelRatio","window","devicePixelRatio","setSize","appendChild","domElement","ambientLight","renderCup","cylinderGeo","texture","load","tex","wrapS","wrapT","anisotropy","cylinderMat","side","opacity","transparent","cylinderMesh","set","z","lookAt","animate","requestAnimationFrame","updateTexture","mesh","material","needsUpdate","preview_render","_m","preview_staticRenderFns","preview_esExports","components_preview","preview_normalizeComponent","preview___vue_styles__","preview_Component","src_components_preview","bl","ll","cup","components","myCanvas","changeBackground","bgList","bgListVisible","changeLayout","layoutList","layoutListVisible","beforeMount","cup_render","trigger","gutter","arg","cup_staticRenderFns","cup_esExports","components_cup","cup_normalizeComponent","cup___vue_styles__","cup_Component","src_components_cup","App","App_render","App_staticRenderFns","App_esExports","selectortype_template_index_0_src_App","App_normalizeComponent","App___vue_styles__","App_Component","src_App","config","productionTip","use","el","template","OzmA","jSAi","rK6t","sUZJ","yag8"],"mappings":"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","file":"static/js/app.c6b515e49ee083c21a2f.js","sourcesContent":["webpackJsonp([1],{\n\n/***/ \"/IO3\":\n/***/ (function(module, exports) {\n\nmodule.exports = [{\"name\":\"layout1\",\"url\":\"/static/img/layout1.png\",\"layout\":{\"img\":[{\"type\":\"circle\",\"x\":200,\"y\":200,\"r\":130}],\"text\":[{\"x\":450,\"y\":200,\"width\":200,\"height\":100}]}},{\"name\":\"layout2\",\"url\":\"/static/img/layout2.png\",\"layout\":{\"img\":[{\"type\":\"circle\",\"x\":250,\"y\":200,\"r\":100},{\"type\":\"circle\",\"x\":550,\"y\":200,\"r\":100}],\"text\":[{\"x\":300,\"y\":400,\"width\":200,\"height\":100}]}},{\"name\":\"layout3\",\"url\":\"/static/img/layout3.png\",\"layout\":{\"img\":[{\"type\":\"circle\",\"x\":250,\"y\":240,\"r\":80},{\"type\":\"circle\",\"x\":390,\"y\":180,\"r\":80},{\"type\":\"circle\",\"x\":530,\"y\":240,\"r\":80}],\"text\":[{\"x\":300,\"y\":400,\"width\":200,\"height\":100}]}},{\"name\":\"layout4\",\"url\":\"/static/img/layout4.png\",\"layout\":{\"img\":[{\"type\":\"rect\",\"x\":150,\"y\":100,\"width\":200,\"height\":200,\"rotation\":-20},{\"type\":\"rect\",\"x\":450,\"y\":100,\"width\":200,\"height\":200,\"rotation\":20}],\"text\":[{\"x\":300,\"y\":400,\"width\":200,\"height\":100}]}},{\"name\":\"layout5\",\"url\":\"/static/img/layout5.png\",\"layout\":{\"img\":[{\"type\":\"circle\",\"x\":390,\"y\":180,\"r\":120}],\"text\":[{\"x\":300,\"y\":400,\"width\":200,\"height\":100}]}},{\"name\":\"layout6\",\"url\":\"/static/img/layout6.png\",\"layout\":{\"img\":[{\"type\":\"circle\",\"x\":250,\"y\":200,\"r\":100},{\"type\":\"circle\",\"x\":550,\"y\":200,\"r\":100}],\"text\":[{\"x\":150,\"y\":400,\"width\":200,\"height\":100},{\"x\":450,\"y\":400,\"width\":200,\"height\":100}]}},{\"name\":\"layout7\",\"url\":\"/static/img/layout7.png\",\"layout\":{\"img\":[{\"type\":\"rect\",\"x\":300,\"y\":100,\"width\":200,\"height\":200,\"rotation\":0}],\"text\":[{\"x\":300,\"y\":400,\"width\":200,\"height\":100}]}},{\"name\":\"layout8\",\"url\":\"/static/img/layout8.png\",\"layout\":{\"img\":[{\"type\":\"rect\",\"x\":150,\"y\":100,\"width\":200,\"height\":200,\"rotation\":0},{\"type\":\"rect\",\"x\":450,\"y\":100,\"width\":200,\"height\":200,\"rotation\":0}],\"text\":[{\"x\":150,\"y\":400,\"width\":200,\"height\":100},{\"x\":450,\"y\":400,\"width\":200,\"height\":100}]}},{\"name\":\"layout9\",\"url\":\"/static/img/layout9.png\",\"layout\":{\"img\":[{\"type\":\"rect\",\"x\":100,\"y\":150,\"width\":200,\"height\":200,\"rotation\":-15},{\"type\":\"rect\",\"x\":300,\"y\":100,\"width\":200,\"height\":200,\"rotation\":0},{\"type\":\"rect\",\"x\":500,\"y\":150,\"width\":200,\"height\":200,\"rotation\":15}],\"text\":[{\"x\":300,\"y\":400,\"width\":200,\"height\":100}]}},{\"name\":\"layout10\",\"url\":\"/static/img/layout10.png\",\"layout\":{\"img\":[{\"type\":\"rect\",\"x\":130,\"y\":130,\"width\":230,\"height\":230,\"rotation\":0}],\"text\":[{\"x\":450,\"y\":200,\"width\":200,\"height\":100}]}}]\n\n/***/ }),\n\n/***/ \"H9h6\":\n/***/ (function(module, exports) {\n\nmodule.exports = [{\"name\":\"background1\",\"url\":\"/static/img/bg1.png\"},{\"name\":\"background2\",\"url\":\"/static/img/bg2.png\"}]\n\n/***/ }),\n\n/***/ \"NHnr\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n\n// EXTERNAL MODULE: ./node_modules/_vue@2.5.8@vue/dist/vue.esm.js\nvar vue_esm = __webpack_require__(\"TWX9\");\n\n// EXTERNAL MODULE: ./node_modules/_element-ui@2.0.5@element-ui/lib/element-ui.common.js\nvar element_ui_common = __webpack_require__(\"z5U/\");\nvar element_ui_common_default = /*#__PURE__*/__webpack_require__.n(element_ui_common);\n\n// EXTERNAL MODULE: ./node_modules/_element-ui@2.0.5@element-ui/lib/theme-chalk/index.css\nvar theme_chalk = __webpack_require__(\"rK6t\");\nvar theme_chalk_default = /*#__PURE__*/__webpack_require__.n(theme_chalk);\n\n// EXTERNAL MODULE: ./node_modules/_babel-runtime@6.26.0@babel-runtime/core-js/object/assign.js\nvar object_assign = __webpack_require__(\"aA9S\");\nvar assign_default = /*#__PURE__*/__webpack_require__.n(object_assign);\n\n// EXTERNAL MODULE: ./node_modules/_konva@1.7.6@konva/konva.js\nvar konva = __webpack_require__(\"S3zW\");\nvar konva_default = /*#__PURE__*/__webpack_require__.n(konva);\n\n// CONCATENATED MODULE: ./node_modules/_babel-loader@7.1.2@babel-loader/lib!./node_modules/_vue-loader@13.5.0@vue-loader/lib/selector.js?type=script&index=0!./src/components/canvas.vue\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\n\n/* harmony default export */ var canvas = ({\n  name: 'cupCanvas',\n  data: function data() {\n    return {\n      textShow: false,\n      inputUrl: '',\n      layout: '',\n      layer: '',\n      stage: '',\n      dialogVisible: false,\n      currentGroup: '',\n      fontStyle: {\n        fontFamily: 'serif',\n        fontSize: 30,\n        textAlign: 'left',\n        color: '#808080'\n      },\n      fontFamilys: ['serif', 'sans-serif', 'monospace', 'cursive', 'fantasy', 'system-ui'],\n      images: []\n    };\n  },\n\n  methods: {\n    saveImage: function saveImage() {\n      var dataUrl = this.stage.toDataURL();\n      this.$root.bus.$emit('canvasChange', dataUrl);\n    },\n    changeTextStyle: function changeTextStyle() {\n      this.fontStyle.fontSize = this.fontStyle.fontSize + 'px';\n      var textarea = this.$refs.textarea;\n      assign_default()(textarea.style, this.fontStyle);\n    },\n    printText: function printText(text) {\n      var textarea = this.$refs.textarea;\n      var strSize = textarea.style.fontSize;\n      var numSize = Number(strSize.substring(0, strSize.length - 2));\n      text.fontSize(numSize);\n      text.fontFamily(textarea.style.fontFamily);\n      text.text(textarea.value);\n      text.align(textarea.style.textAlign);\n      text.stroke(textarea.style.color);\n      this.layer.draw();\n      this.textShow = false;\n      this.saveImage();\n    },\n    inputText: function inputText(text) {\n      var _this = this;\n\n      var textarea = this.$refs.textarea;\n      var textPosition = text.position();\n      textarea.value = text.text();\n      textarea.style.position = 'absolute';\n      textarea.style.fontSize = text.fontSize() + 'px';\n      textarea.style.fontFamily = text.fontFamily();\n      textarea.style.color = text.stroke();\n      textarea.style.textAlign = text.align();\n      textarea.style.width = text.width() + 'px';\n      textarea.style.height = text.height() + 'px';\n      textarea.style.top = textPosition.y + 'px';\n      textarea.style.left = textPosition.x + 'px';\n      textarea.style['z-index'] = 1;\n      this.textShow = true;\n      textarea.addEventListener('keydown', function (e) {\n        if (e.keyCode === 13) {\n          _this.printText(text);\n        }\n      });\n    },\n    drawImage: function drawImage(dataUrl) {\n      var _this2 = this;\n\n      var shape = void 0;\n      var sWidth = void 0;\n      var sHeight = void 0;\n      var pX = void 0;\n      var pY = void 0;\n      if (this.currentGroup.findOne('Circle')) {\n        shape = this.currentGroup.findOne('Circle');\n        sWidth = shape.size().width;\n        sHeight = shape.size().height;\n        pX = shape.position().x - sWidth / 2;\n        pY = shape.position().y - sHeight / 2;\n      } else if (this.currentGroup.findOne('Rect')) {\n        shape = this.currentGroup.findOne('Rect');\n        sWidth = shape.size().width;\n        sHeight = shape.size().height;\n        pX = shape.position().x;\n        pY = shape.position().y;\n      }\n      var imgObj = new Image();\n      imgObj.src = dataUrl;\n      imgObj.onload = function () {\n        var img = new konva_default.a.Image({\n          name: 'img',\n          image: imgObj,\n          width: sWidth,\n          height: sHeight,\n          x: pX,\n          y: pY,\n          draggable: true\n        });\n        _this2.currentGroup.add(img);\n        _this2.layer.draw();\n        _this2.saveImage();\n        _this2.dialogVisible = false;\n      };\n    },\n    uploadImage: function uploadImage() {\n      var _this3 = this;\n\n      var fileUp = document.getElementById('fileup');\n      var fr = new FileReader();\n      fr.onload = function (e) {\n        _this3.images.push(e.target.result);\n      };\n      fr.readAsDataURL(fileUp.files[0]);\n    },\n    addImgShapes: function addImgShapes(imgObj) {\n      var _this4 = this;\n\n      var shape = void 0;\n      var group = void 0;\n      if (imgObj.type === 'circle') {\n        group = new konva_default.a.Group({\n          clipFunc: function clipFunc(ctx) {\n            ctx.arc(imgObj.x, imgObj.y, imgObj.r, 0, Math.PI * 2);\n          }\n        });\n        shape = new konva_default.a.Circle({\n          x: imgObj.x,\n          y: imgObj.y,\n          radius: imgObj.r,\n          stroke: 'black',\n          strokeWidth: 2\n        });\n      } else if (imgObj.type === 'rect') {\n        group = new konva_default.a.Group({\n          clipFunc: function clipFunc(ctx) {\n            var pX = imgObj.x + imgObj.width / 2;\n            var pY = imgObj.y + imgObj.height / 2;\n            ctx.translate(pX, pY);\n            ctx.rotate(imgObj.rotation * Math.PI / 180);\n            ctx.translate(-pX, -pY);\n            ctx.rect(imgObj.x, imgObj.y, imgObj.width, imgObj.height);\n          }\n        });\n        shape = new konva_default.a.Rect({\n          x: imgObj.x,\n          y: imgObj.y,\n          width: imgObj.width,\n          height: imgObj.height,\n          stroke: 'black',\n          strokeWidth: 2\n        });\n      }\n      group.add(shape);\n      group.on('click', function () {\n        _this4.currentGroup = group;\n        _this4.dialogVisible = true;\n      });\n      this.layer.add(group);\n      this.layer.draw();\n    },\n    addTextShapes: function addTextShapes(textObj) {\n      var _this5 = this;\n\n      var text = new konva_default.a.Text({\n        x: textObj.x,\n        y: textObj.y,\n        width: textObj.width,\n        height: textObj.height,\n        stroke: '#808080',\n        strokeWidth: 1,\n        text: '点我输入文字',\n        fontSize: 30,\n        fontFamily: 'serif'\n      });\n      text.on('click', function () {\n        _this5.inputText(text);\n      });\n      this.layer.add(text);\n      this.layer.draw();\n    }\n  },\n  mounted: function mounted() {\n    var _this6 = this;\n\n    this.stage = new konva_default.a.Stage({\n      container: 'myCanvas',\n      width: 800,\n      height: 600\n    });\n    var bgLayer = new konva_default.a.Layer();\n    this.layer = new konva_default.a.Layer();\n    this.stage.add(bgLayer);\n    this.stage.add(this.layer);\n    bgLayer.moveToBottom();\n    this.$root.bus.$on('bgChange', function (bgUrl) {\n      bgLayer.find('.background').destroy();\n      var bgImgObj = new Image();\n      bgImgObj.src = bgUrl;\n      bgImgObj.onload = function () {\n        var img = new konva_default.a.Image({\n          name: 'background',\n          image: bgImgObj\n        });\n        bgLayer.add(img);\n        img.moveToBottom();\n        bgLayer.draw();\n        _this6.saveImage();\n      };\n    });\n    this.$root.bus.$on('layoutChange', function (layout) {\n      _this6.layout = layout;\n      _this6.layer.removeChildren();\n      layout.img.map(function (item) {\n        _this6.addImgShapes(item);\n      });\n      layout.text.map(function (item) {\n        _this6.addTextShapes(item);\n      });\n      _this6.saveImage();\n    });\n  }\n});\n// CONCATENATED MODULE: ./node_modules/_vue-loader@13.5.0@vue-loader/lib/template-compiler?{\"id\":\"data-v-b786b7d2\",\"hasScoped\":true,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.5.0@vue-loader/lib/selector.js?type=template&index=0!./src/components/canvas.vue\nvar render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"container\"}},[_c('el-dialog',{attrs:{\"title\":\"图片选择\",\"width\":\"540\",\"visible\":_vm.dialogVisible},on:{\"update:visible\":function($event){_vm.dialogVisible=$event}}},[_c('div',{staticClass:\"thumbs\"},[_c('el-row',_vm._l((_vm.images),function(item,index){return _c('el-col',{key:index,attrs:{\"span\":5}},[_c('div',{staticClass:\"img-btn\"},[_c('el-button',{attrs:{\"type\":\"success\",\"size\":\"mini\",\"round\":\"\"},on:{\"click\":function($event){_vm.drawImage(item);}}},[_vm._v(\"选择图片\")]),_vm._v(\" \"),_c('br'),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"danger\",\"size\":\"mini\",\"round\":\"\"},on:{\"click\":function($event){_vm.images.splice(index, 1)}}},[_vm._v(\"删除图片\")])],1),_vm._v(\" \"),_c('img',{staticClass:\"savedImg\",attrs:{\"src\":item,\"alt\":(\"保存的图片\" + index)}})])}))],1),_vm._v(\" \"),_c('div',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-input',{attrs:{\"placeholder\":\"手动输入图片URL\"},model:{value:(_vm.inputUrl),callback:function ($$v) {_vm.inputUrl=$$v},expression:\"inputUrl\"}},[_c('el-button',{attrs:{\"slot\":\"append\",\"icon\":\"el-icon-upload2\",\"size\":\"small\"},on:{\"click\":function($event){_vm.images.push(_vm.inputUrl)}},slot:\"append\"})],1),_vm._v(\" \"),_c('input',{attrs:{\"type\":\"file\",\"id\":\"fileup\",\"accept\":\".jpg, .jpeg, .png, .gif\"},on:{\"change\":_vm.uploadImage}}),_vm._v(\" \"),_c('el-button',{on:{\"click\":function($event){_vm.dialogVisible = false}}},[_vm._v(\"取 消\")])],1)]),_vm._v(\" \"),_c('el-popover',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.textShow),expression:\"textShow\"}],attrs:{\"placement\":\"right\",\"width\":\"210\"}},[_c('textarea',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.textShow),expression:\"textShow\"}],ref:\"textarea\",attrs:{\"slot\":\"reference\",\"autofocus\":\"\"},slot:\"reference\"}),_vm._v(\" \"),_c('div',[_c('el-select',{on:{\"change\":_vm.changeTextStyle},model:{value:(_vm.fontStyle.fontFamily),callback:function ($$v) {_vm.$set(_vm.fontStyle, \"fontFamily\", $$v)},expression:\"fontStyle.fontFamily\"}},_vm._l((_vm.fontFamilys),function(item){return _c('el-option',{key:item,attrs:{\"label\":item,\"value\":item}})})),_vm._v(\" \"),_c('el-color-picker',{on:{\"change\":_vm.changeTextStyle},model:{value:(_vm.fontStyle.color),callback:function ($$v) {_vm.$set(_vm.fontStyle, \"color\", $$v)},expression:\"fontStyle.color\"}}),_vm._v(\" \"),_c('el-input-number',{attrs:{\"label\":\"字体\",\"size\":\"small\"},on:{\"change\":_vm.changeTextStyle},model:{value:(_vm.fontStyle.fontSize),callback:function ($$v) {_vm.$set(_vm.fontStyle, \"fontSize\", $$v)},expression:\"fontStyle.fontSize\"}}),_vm._v(\" \"),_c('el-radio-group',{attrs:{\"size\":\"medium\"},on:{\"change\":_vm.changeTextStyle},model:{value:(_vm.fontStyle.textAlign),callback:function ($$v) {_vm.$set(_vm.fontStyle, \"textAlign\", $$v)},expression:\"fontStyle.textAlign\"}},[_c('el-radio-button',{attrs:{\"label\":\"left\"}},[_vm._v(\"靠左\")]),_vm._v(\" \"),_c('el-radio-button',{attrs:{\"label\":\"center\"}},[_vm._v(\"居中\")]),_vm._v(\" \"),_c('el-radio-button',{attrs:{\"label\":\"right\"}},[_vm._v(\"靠右\")])],1)],1)]),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"myCanvas\"}}),_vm._v(\" \"),_c('el-button',{attrs:{\"plain\":\"\"},on:{\"click\":function($event){_vm.$root.bus.$emit('layoutChange', _vm.layout)}}},[_vm._v(\"清空重做\")])],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\n/* harmony default export */ var components_canvas = (esExports);\n// CONCATENATED MODULE: ./src/components/canvas.vue\nfunction injectStyle (ssrContext) {\n  __webpack_require__(\"yag8\")\n}\nvar normalizeComponent = __webpack_require__(\"/Xao\")\n/* script */\n\n/* template */\n\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-b786b7d2\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  canvas,\n  components_canvas,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\n/* harmony default export */ var src_components_canvas = (Component.exports);\n\n// EXTERNAL MODULE: ./node_modules/_three@0.88.0@three/build/three.module.js\nvar three_module = __webpack_require__(\"Lsr5\");\n\n// CONCATENATED MODULE: ./node_modules/_babel-loader@7.1.2@babel-loader/lib!./node_modules/_vue-loader@13.5.0@vue-loader/lib/selector.js?type=script&index=0!./src/components/preview.vue\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\n/* harmony default export */ var preview = ({\n  name: 'preview',\n  data: function data() {\n    return {\n      scene: null,\n      camera: null,\n      renderer: null\n    };\n  },\n\n  methods: {\n    initScene: function initScene() {\n      var container = document.getElementById('p-container');\n      this.scene = new three_module[\"h\" /* Scene */]();\n      // this.scene.background = new THREE.Color()\n      this.camera = new three_module[\"f\" /* PerspectiveCamera */](45, 225 / 475, 1, 2000);\n      this.camera.position.y = 400;\n      this.scene.add(this.camera);\n      this.renderer = new three_module[\"j\" /* WebGLRenderer */]({ alpha: true });\n      this.renderer.setPixelRatio(window.devicePixelRatio);\n      this.renderer.setSize(225, 475);\n      container.appendChild(this.renderer.domElement);\n      var ambientLight = new three_module[\"a\" /* AmbientLight */](0xffffff, 1);\n      this.scene.add(ambientLight);\n    },\n    renderCup: function renderCup() {\n      var _this = this;\n\n      var cylinderGeo = new three_module[\"b\" /* CylinderGeometry */](155, 128, 585, 40, 5, true);\n      var texture = new three_module[\"i\" /* TextureLoader */]().load('/static/img/bg1.png', function (tex) {\n        texture.wrapS = texture.wrapT = three_module[\"g\" /* RepeatWrapping */];\n        texture.anisotropy = 16;\n        var cylinderMat = new three_module[\"e\" /* MeshPhongMaterial */]({\n          map: texture,\n          side: three_module[\"c\" /* DoubleSide */],\n          opacity: 0.8,\n          transparent: true\n        });\n        var cylinderMesh = new three_module[\"d\" /* Mesh */](cylinderGeo, cylinderMat);\n        cylinderMesh.position.set(0, -40, 0);\n        _this.scene.add(cylinderMesh);\n        _this.camera.position.z = 800;\n        _this.camera.lookAt(_this.scene.position);\n        var animate = function animate() {\n          requestAnimationFrame(animate);\n          cylinderMesh.rotation.y += 0.01;\n          _this.renderer.render(_this.scene, _this.camera);\n        };\n        animate();\n        // this.renderer.render(this.scene, this.camera)\n        _this.$root.bus.$on('canvasChange', function (url) {\n          _this.updateTexture(cylinderMesh, url);\n        });\n      });\n    },\n    updateTexture: function updateTexture(mesh, url) {\n      mesh.material.map = new three_module[\"i\" /* TextureLoader */]().load(url);\n      mesh.material.needsUpdate = true;\n    }\n  },\n  mounted: function mounted() {\n    this.initScene();\n    this.renderCup();\n  }\n});\n// CONCATENATED MODULE: ./node_modules/_vue-loader@13.5.0@vue-loader/lib/template-compiler?{\"id\":\"data-v-4b05c604\",\"hasScoped\":true,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.5.0@vue-loader/lib/selector.js?type=template&index=0!./src/components/preview.vue\nvar preview_render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _vm._m(0,false,false)}\nvar preview_staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"container\"}},[_c('div',{staticClass:\"container\",attrs:{\"id\":\"p-container\"}}),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"images-back\"}},[_c('img',{attrs:{\"src\":\"/static/img/cup-back.png\"}})]),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"images-front\"}},[_c('img',{attrs:{\"src\":\"/static/img/cup-front.png\"}})])])}]\nvar preview_esExports = { render: preview_render, staticRenderFns: preview_staticRenderFns }\n/* harmony default export */ var components_preview = (preview_esExports);\n// CONCATENATED MODULE: ./src/components/preview.vue\nfunction preview_injectStyle (ssrContext) {\n  __webpack_require__(\"OzmA\")\n}\nvar preview_normalizeComponent = __webpack_require__(\"/Xao\")\n/* script */\n\n/* template */\n\n/* template functional */\nvar preview___vue_template_functional__ = false\n/* styles */\nvar preview___vue_styles__ = preview_injectStyle\n/* scopeId */\nvar preview___vue_scopeId__ = \"data-v-4b05c604\"\n/* moduleIdentifier (server only) */\nvar preview___vue_module_identifier__ = null\nvar preview_Component = preview_normalizeComponent(\n  preview,\n  components_preview,\n  preview___vue_template_functional__,\n  preview___vue_styles__,\n  preview___vue_scopeId__,\n  preview___vue_module_identifier__\n)\n\n/* harmony default export */ var src_components_preview = (preview_Component.exports);\n\n// CONCATENATED MODULE: ./node_modules/_babel-loader@7.1.2@babel-loader/lib!./node_modules/_vue-loader@13.5.0@vue-loader/lib/selector.js?type=script&index=0!./src/components/cup.vue\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\n\nvar bl = __webpack_require__(\"H9h6\");\nvar ll = __webpack_require__(\"/IO3\");\n/* harmony default export */ var cup = ({\n  name: 'cup',\n  components: {\n    myCanvas: src_components_canvas,\n    preview: src_components_preview\n  },\n  methods: {\n    changeBackground: function changeBackground(index) {\n      this.bgUrl = this.bgList[index].url;\n      this.bgListVisible = false;\n      this.$root.bus.$emit('bgChange', this.bgUrl);\n    },\n    changeLayout: function changeLayout(index) {\n      this.layout = this.layoutList[index].layout;\n      this.layoutListVisible = false;\n      this.$root.bus.$emit('layoutChange', this.layout);\n    }\n  },\n  beforeMount: function beforeMount() {\n    this.bgList = bl;\n    this.layoutList = ll;\n  },\n  mounted: function mounted() {\n    this.changeBackground(0);\n    this.changeLayout(0);\n  },\n  data: function data() {\n    return {\n      bgListVisible: false,\n      bgList: [],\n      bgUrl: '',\n      layoutListVisible: false,\n      layoutList: [],\n      layout: {}\n    };\n  }\n});\n// CONCATENATED MODULE: ./node_modules/_vue-loader@13.5.0@vue-loader/lib/template-compiler?{\"id\":\"data-v-a21018a4\",\"hasScoped\":true,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.5.0@vue-loader/lib/selector.js?type=template&index=0!./src/components/cup.vue\nvar cup_render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"cup\"},[_c('el-popover',{ref:\"bg-popup\",attrs:{\"placement\":\"right\",\"trigger\":\"click\",\"width\":\"400\"},model:{value:(_vm.bgListVisible),callback:function ($$v) {_vm.bgListVisible=$$v},expression:\"bgListVisible\"}},[_c('el-row',{attrs:{\"gutter\":24}},_vm._l((_vm.bgList),function(item,index){return _c('el-col',{key:index,attrs:{\"span\":12}},[_c('el-button',{on:{\"click\":function($event){_vm.changeBackground(index)}}},[_c('img',{attrs:{\"src\":item.url,\"alt\":(\"背景图\" + index)}})])],1)}))],1),_vm._v(\" \"),_c('el-popover',{ref:\"layout-popup\",attrs:{\"placement\":\"right\",\"trigger\":\"click\",\"width\":\"400\"},model:{value:(_vm.layoutListVisible),callback:function ($$v) {_vm.layoutListVisible=$$v},expression:\"layoutListVisible\"}},[_c('el-row',{attrs:{\"gutter\":24}},_vm._l((_vm.layoutList),function(item,index){return _c('el-col',{key:index,attrs:{\"span\":12}},[_c('el-button',{on:{\"click\":function($event){_vm.changeLayout(index)}}},[_c('img',{attrs:{\"src\":item.url,\"alt\":(\"layout\" + index)}})])],1)}))],1),_vm._v(\" \"),_c('el-container',[_c('el-aside',[_c('ul',[_c('li',[_c('el-button',{directives:[{name:\"popover\",rawName:\"v-popover:bg-popup\",arg:\"bg-popup\"}],attrs:{\"plain\":\"\"}},[_vm._v(\"更换背景\")])],1),_vm._v(\" \"),_c('li',[_c('el-button',{directives:[{name:\"popover\",rawName:\"v-popover:layout-popup\",arg:\"layout-popup\"}],attrs:{\"plain\":\"\"}},[_vm._v(\"更换布局\")])],1)])]),_vm._v(\" \"),_c('el-main',[_c('my-canvas')],1),_vm._v(\" \"),_c('el-aside',[_c('preview')],1)],1)],1)}\nvar cup_staticRenderFns = []\nvar cup_esExports = { render: cup_render, staticRenderFns: cup_staticRenderFns }\n/* harmony default export */ var components_cup = (cup_esExports);\n// CONCATENATED MODULE: ./src/components/cup.vue\nfunction cup_injectStyle (ssrContext) {\n  __webpack_require__(\"sUZJ\")\n}\nvar cup_normalizeComponent = __webpack_require__(\"/Xao\")\n/* script */\n\n/* template */\n\n/* template functional */\nvar cup___vue_template_functional__ = false\n/* styles */\nvar cup___vue_styles__ = cup_injectStyle\n/* scopeId */\nvar cup___vue_scopeId__ = \"data-v-a21018a4\"\n/* moduleIdentifier (server only) */\nvar cup___vue_module_identifier__ = null\nvar cup_Component = cup_normalizeComponent(\n  cup,\n  components_cup,\n  cup___vue_template_functional__,\n  cup___vue_styles__,\n  cup___vue_scopeId__,\n  cup___vue_module_identifier__\n)\n\n/* harmony default export */ var src_components_cup = (cup_Component.exports);\n\n// CONCATENATED MODULE: ./node_modules/_babel-loader@7.1.2@babel-loader/lib!./node_modules/_vue-loader@13.5.0@vue-loader/lib/selector.js?type=script&index=0!./src/App.vue\n//\n//\n//\n//\n//\n//\n\n\n// import preview from './components/preview'\n\n/* harmony default export */ var App = ({\n  name: 'app',\n  components: {\n    cup: src_components_cup\n  }\n});\n// CONCATENATED MODULE: ./node_modules/_vue-loader@13.5.0@vue-loader/lib/template-compiler?{\"id\":\"data-v-bee39478\",\"hasScoped\":false,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.5.0@vue-loader/lib/selector.js?type=template&index=0!./src/App.vue\nvar App_render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('cup')],1)}\nvar App_staticRenderFns = []\nvar App_esExports = { render: App_render, staticRenderFns: App_staticRenderFns }\n/* harmony default export */ var selectortype_template_index_0_src_App = (App_esExports);\n// CONCATENATED MODULE: ./src/App.vue\nfunction App_injectStyle (ssrContext) {\n  __webpack_require__(\"jSAi\")\n}\nvar App_normalizeComponent = __webpack_require__(\"/Xao\")\n/* script */\n\n/* template */\n\n/* template functional */\nvar App___vue_template_functional__ = false\n/* styles */\nvar App___vue_styles__ = App_injectStyle\n/* scopeId */\nvar App___vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar App___vue_module_identifier__ = null\nvar App_Component = App_normalizeComponent(\n  App,\n  selectortype_template_index_0_src_App,\n  App___vue_template_functional__,\n  App___vue_styles__,\n  App___vue_scopeId__,\n  App___vue_module_identifier__\n)\n\n/* harmony default export */ var src_App = (App_Component.exports);\n\n// CONCATENATED MODULE: ./src/main.js\n// The Vue build version to load with the `import` command\n// (runtime-only or standalone) has been set in webpack.base.conf with an alias.\n\n\n\n\n\nvue_esm[\"default\"].config.productionTip = false;\nvue_esm[\"default\"].use(element_ui_common_default.a);\n/* eslint-disable no-new */\nnew vue_esm[\"default\"]({\n  el: '#app',\n  template: '<App/>',\n  components: { App: src_App },\n  data: {\n    bus: new vue_esm[\"default\"]()\n  }\n});\n\n/***/ }),\n\n/***/ \"OzmA\":\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ \"jSAi\":\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ \"rK6t\":\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ \"sUZJ\":\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ \"yag8\":\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ })\n\n},[\"NHnr\"]);\n\n\n// WEBPACK FOOTER //\n// static/js/app.c6b515e49ee083c21a2f.js","module.exports = [{\"name\":\"layout1\",\"url\":\"/static/img/layout1.png\",\"layout\":{\"img\":[{\"type\":\"circle\",\"x\":200,\"y\":200,\"r\":130}],\"text\":[{\"x\":450,\"y\":200,\"width\":200,\"height\":100}]}},{\"name\":\"layout2\",\"url\":\"/static/img/layout2.png\",\"layout\":{\"img\":[{\"type\":\"circle\",\"x\":250,\"y\":200,\"r\":100},{\"type\":\"circle\",\"x\":550,\"y\":200,\"r\":100}],\"text\":[{\"x\":300,\"y\":400,\"width\":200,\"height\":100}]}},{\"name\":\"layout3\",\"url\":\"/static/img/layout3.png\",\"layout\":{\"img\":[{\"type\":\"circle\",\"x\":250,\"y\":240,\"r\":80},{\"type\":\"circle\",\"x\":390,\"y\":180,\"r\":80},{\"type\":\"circle\",\"x\":530,\"y\":240,\"r\":80}],\"text\":[{\"x\":300,\"y\":400,\"width\":200,\"height\":100}]}},{\"name\":\"layout4\",\"url\":\"/static/img/layout4.png\",\"layout\":{\"img\":[{\"type\":\"rect\",\"x\":150,\"y\":100,\"width\":200,\"height\":200,\"rotation\":-20},{\"type\":\"rect\",\"x\":450,\"y\":100,\"width\":200,\"height\":200,\"rotation\":20}],\"text\":[{\"x\":300,\"y\":400,\"width\":200,\"height\":100}]}},{\"name\":\"layout5\",\"url\":\"/static/img/layout5.png\",\"layout\":{\"img\":[{\"type\":\"circle\",\"x\":390,\"y\":180,\"r\":120}],\"text\":[{\"x\":300,\"y\":400,\"width\":200,\"height\":100}]}},{\"name\":\"layout6\",\"url\":\"/static/img/layout6.png\",\"layout\":{\"img\":[{\"type\":\"circle\",\"x\":250,\"y\":200,\"r\":100},{\"type\":\"circle\",\"x\":550,\"y\":200,\"r\":100}],\"text\":[{\"x\":150,\"y\":400,\"width\":200,\"height\":100},{\"x\":450,\"y\":400,\"width\":200,\"height\":100}]}},{\"name\":\"layout7\",\"url\":\"/static/img/layout7.png\",\"layout\":{\"img\":[{\"type\":\"rect\",\"x\":300,\"y\":100,\"width\":200,\"height\":200,\"rotation\":0}],\"text\":[{\"x\":300,\"y\":400,\"width\":200,\"height\":100}]}},{\"name\":\"layout8\",\"url\":\"/static/img/layout8.png\",\"layout\":{\"img\":[{\"type\":\"rect\",\"x\":150,\"y\":100,\"width\":200,\"height\":200,\"rotation\":0},{\"type\":\"rect\",\"x\":450,\"y\":100,\"width\":200,\"height\":200,\"rotation\":0}],\"text\":[{\"x\":150,\"y\":400,\"width\":200,\"height\":100},{\"x\":450,\"y\":400,\"width\":200,\"height\":100}]}},{\"name\":\"layout9\",\"url\":\"/static/img/layout9.png\",\"layout\":{\"img\":[{\"type\":\"rect\",\"x\":100,\"y\":150,\"width\":200,\"height\":200,\"rotation\":-15},{\"type\":\"rect\",\"x\":300,\"y\":100,\"width\":200,\"height\":200,\"rotation\":0},{\"type\":\"rect\",\"x\":500,\"y\":150,\"width\":200,\"height\":200,\"rotation\":15}],\"text\":[{\"x\":300,\"y\":400,\"width\":200,\"height\":100}]}},{\"name\":\"layout10\",\"url\":\"/static/img/layout10.png\",\"layout\":{\"img\":[{\"type\":\"rect\",\"x\":130,\"y\":130,\"width\":230,\"height\":230,\"rotation\":0}],\"text\":[{\"x\":450,\"y\":200,\"width\":200,\"height\":100}]}}]\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/model/layout-list.json\n// module id = /IO3\n// module chunks = 1","module.exports = [{\"name\":\"background1\",\"url\":\"/static/img/bg1.png\"},{\"name\":\"background2\",\"url\":\"/static/img/bg2.png\"}]\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/model/bg-list.json\n// module id = H9h6\n// module chunks = 1","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/_vue-loader@13.5.0@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-b786b7d2\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../node_modules/_vue-loader@13.5.0@vue-loader/lib/selector?type=styles&index=0!./canvas.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/_vue-loader@13.5.0@vue-loader/lib/component-normalizer\")\n/* script */\nimport __vue_script__ from \"!!babel-loader!../../node_modules/_vue-loader@13.5.0@vue-loader/lib/selector?type=script&index=0!./canvas.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/_vue-loader@13.5.0@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-b786b7d2\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":\\\"src\\\",\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/_vue-loader@13.5.0@vue-loader/lib/selector?type=template&index=0!./canvas.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-b786b7d2\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/canvas.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/_vue-loader@13.5.0@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-4b05c604\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../node_modules/_vue-loader@13.5.0@vue-loader/lib/selector?type=styles&index=0!./preview.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/_vue-loader@13.5.0@vue-loader/lib/component-normalizer\")\n/* script */\nimport __vue_script__ from \"!!babel-loader!../../node_modules/_vue-loader@13.5.0@vue-loader/lib/selector?type=script&index=0!./preview.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/_vue-loader@13.5.0@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-4b05c604\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":\\\"src\\\",\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/_vue-loader@13.5.0@vue-loader/lib/selector?type=template&index=0!./preview.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-4b05c604\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/preview.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/_vue-loader@13.5.0@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-a21018a4\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../node_modules/_vue-loader@13.5.0@vue-loader/lib/selector?type=styles&index=0!./cup.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/_vue-loader@13.5.0@vue-loader/lib/component-normalizer\")\n/* script */\nimport __vue_script__ from \"!!babel-loader!../../node_modules/_vue-loader@13.5.0@vue-loader/lib/selector?type=script&index=0!./cup.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/_vue-loader@13.5.0@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-a21018a4\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":\\\"src\\\",\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/_vue-loader@13.5.0@vue-loader/lib/selector?type=template&index=0!./cup.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-a21018a4\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/cup.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../node_modules/_vue-loader@13.5.0@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-bee39478\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../node_modules/_vue-loader@13.5.0@vue-loader/lib/selector?type=styles&index=0!./App.vue\")\n}\nvar normalizeComponent = require(\"!../node_modules/_vue-loader@13.5.0@vue-loader/lib/component-normalizer\")\n/* script */\nimport __vue_script__ from \"!!babel-loader!../node_modules/_vue-loader@13.5.0@vue-loader/lib/selector?type=script&index=0!./App.vue\"\n/* template */\nimport __vue_template__ from \"!!../node_modules/_vue-loader@13.5.0@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-bee39478\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":\\\"src\\\",\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../node_modules/_vue-loader@13.5.0@vue-loader/lib/selector?type=template&index=0!./App.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/App.vue\n// module id = null\n// module chunks = ","<template>\r\n  <div id=\"container\">\r\n    <el-dialog title=\"图片选择\" width=\"540\" :visible.sync=\"dialogVisible\">\r\n      <div class=\"thumbs\">\r\n        <el-row>\r\n          <el-col :span=\"5\" v-for=\"(item, index) in images\" :key=\"index\">\r\n              <div class=\"img-btn\">\r\n                <el-button type=\"success\" size=\"mini\" round @click=\"drawImage(item);\">选择图片</el-button>\r\n                <br/>\r\n                <el-button type=\"danger\" size=\"mini\" round @click=\"images.splice(index, 1)\">删除图片</el-button>\r\n              </div>\r\n              <img :src=\"item\" :alt=\"`保存的图片${index}`\" class=\"savedImg\">\r\n          </el-col>\r\n      </el-row>\r\n      </div>\r\n      <div slot=\"footer\" class=\"dialog-footer\">\r\n        <el-input  v-model=\"inputUrl\" placeholder=\"手动输入图片URL\" >\r\n           <el-button slot=\"append\" icon=\"el-icon-upload2\" @click=\"images.push(inputUrl)\" size=\"small\"></el-button>\r\n        </el-input>\r\n        <input type=\"file\" id=\"fileup\" accept=\".jpg, .jpeg, .png, .gif\" @change=\"uploadImage\"/>\r\n        <el-button @click=\"dialogVisible = false\">取 消</el-button>\r\n      </div>\r\n    </el-dialog>\r\n    <el-popover v-show=\"textShow\" placement=\"right\" width=\"210\">\r\n      <textarea\r\n        slot=\"reference\"\r\n        ref=\"textarea\"\r\n        autofocus\r\n        v-show=\"textShow\">\r\n      </textarea>\r\n      <div>\r\n          <el-select v-model=\"fontStyle.fontFamily\" @change=\"changeTextStyle\">\r\n            <el-option\r\n              v-for=\"item in fontFamilys\"\r\n              :key=\"item\"\r\n              :label=\"item\"\r\n              :value=\"item\"\r\n            >\r\n            </el-option>\r\n          </el-select>\r\n          <el-color-picker v-model=\"fontStyle.color\" @change=\"changeTextStyle\"></el-color-picker>\r\n          <el-input-number v-model=\"fontStyle.fontSize\" label=\"字体\" size=\"small\" @change=\"changeTextStyle\"></el-input-number> \r\n          <el-radio-group v-model=\"fontStyle.textAlign\" size=\"medium\" @change=\"changeTextStyle\">\r\n            <el-radio-button label=\"left\">靠左</el-radio-button>\r\n            <el-radio-button label=\"center\">居中</el-radio-button>\r\n            <el-radio-button label=\"right\">靠右</el-radio-button>\r\n          </el-radio-group>\r\n      </div>\r\n    </el-popover>\r\n    <div id=\"myCanvas\">\r\n    </div>\r\n    <!-- <el-button plain disabled>上一步</el-button>\r\n    <el-button plain disabled>下一步</el-button> -->\r\n    <el-button plain @click=\"$root.bus.$emit('layoutChange', layout)\">清空重做</el-button>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Konva from 'konva'\r\n\r\nexport default {\r\n  name: 'cupCanvas',\r\n  data () {\r\n    return {\r\n      textShow: false,\r\n      inputUrl: '',\r\n      layout: '',\r\n      layer: '',\r\n      stage: '',\r\n      dialogVisible: false,\r\n      currentGroup: '',\r\n      fontStyle: {\r\n        fontFamily: 'serif',\r\n        fontSize: 30,\r\n        textAlign: 'left',\r\n        color: '#808080'\r\n      },\r\n      fontFamilys: [\r\n        'serif',\r\n        'sans-serif',\r\n        'monospace',\r\n        'cursive',\r\n        'fantasy',\r\n        'system-ui'\r\n      ],\r\n      images: []\r\n    }\r\n  },\r\n  methods: {\r\n    saveImage () {\r\n      const dataUrl = this.stage.toDataURL()\r\n      this.$root.bus.$emit('canvasChange', dataUrl)\r\n    },\r\n    changeTextStyle () {\r\n      this.fontStyle.fontSize = `${this.fontStyle.fontSize}px`\r\n      const textarea = this.$refs.textarea\r\n      Object.assign(textarea.style, this.fontStyle)\r\n    },\r\n    printText (text) {\r\n      const textarea = this.$refs.textarea\r\n      const strSize = textarea.style.fontSize\r\n      const numSize = Number(strSize.substring(0, strSize.length - 2))\r\n      text.fontSize(numSize)\r\n      text.fontFamily(textarea.style.fontFamily)\r\n      text.text(textarea.value)\r\n      text.align(textarea.style.textAlign)\r\n      text.stroke(textarea.style.color)\r\n      this.layer.draw()\r\n      this.textShow = false\r\n      this.saveImage()\r\n    },\r\n    inputText (text) {\r\n      const textarea = this.$refs.textarea\r\n      const textPosition = text.position()\r\n      textarea.value = text.text()\r\n      textarea.style.position = 'absolute'\r\n      textarea.style.fontSize = `${text.fontSize()}px`\r\n      textarea.style.fontFamily = text.fontFamily()\r\n      textarea.style.color = text.stroke()\r\n      textarea.style.textAlign = text.align()\r\n      textarea.style.width = `${text.width()}px`\r\n      textarea.style.height = `${text.height()}px`\r\n      textarea.style.top = textPosition.y + 'px'\r\n      textarea.style.left = textPosition.x + 'px'\r\n      textarea.style['z-index'] = 1\r\n      this.textShow = true\r\n      textarea.addEventListener('keydown', (e) => {\r\n        if (e.keyCode === 13) {\r\n          this.printText(text)\r\n        }\r\n      })\r\n    },\r\n    drawImage (dataUrl) {\r\n      let shape\r\n      let sWidth\r\n      let sHeight\r\n      let pX\r\n      let pY\r\n      if (this.currentGroup.findOne('Circle')) {\r\n        shape = this.currentGroup.findOne('Circle')\r\n        sWidth = shape.size().width\r\n        sHeight = shape.size().height\r\n        pX = shape.position().x - sWidth / 2\r\n        pY = shape.position().y - sHeight / 2\r\n      } else if (this.currentGroup.findOne('Rect')) {\r\n        shape = this.currentGroup.findOne('Rect')\r\n        sWidth = shape.size().width\r\n        sHeight = shape.size().height\r\n        pX = shape.position().x\r\n        pY = shape.position().y\r\n      }\r\n      const imgObj = new Image()\r\n      imgObj.src = dataUrl\r\n      imgObj.onload = () => {\r\n        const img = new Konva.Image({\r\n          name: 'img',\r\n          image: imgObj,\r\n          width: sWidth,\r\n          height: sHeight,\r\n          x: pX,\r\n          y: pY,\r\n          draggable: true\r\n        })\r\n        this.currentGroup.add(img)\r\n        this.layer.draw()\r\n        this.saveImage()\r\n        this.dialogVisible = false\r\n      }\r\n    },\r\n    uploadImage () {\r\n      const fileUp = document.getElementById('fileup')\r\n      const fr = new FileReader()\r\n      fr.onload = (e) => {\r\n        this.images.push(e.target.result)\r\n      }\r\n      fr.readAsDataURL(fileUp.files[0])\r\n    },\r\n    addImgShapes (imgObj) {\r\n      let shape\r\n      let group\r\n      if (imgObj.type === 'circle') {\r\n        group = new Konva.Group({\r\n          clipFunc: (ctx) => {\r\n            ctx.arc(imgObj.x, imgObj.y, imgObj.r, 0, Math.PI * 2)\r\n          }\r\n        })\r\n        shape = new Konva.Circle({\r\n          x: imgObj.x,\r\n          y: imgObj.y,\r\n          radius: imgObj.r,\r\n          stroke: 'black',\r\n          strokeWidth: 2\r\n        })\r\n      } else if (imgObj.type === 'rect') {\r\n        group = new Konva.Group({\r\n          clipFunc: (ctx) => {\r\n            const pX = imgObj.x + imgObj.width / 2\r\n            const pY = imgObj.y + imgObj.height / 2\r\n            ctx.translate(pX, pY)\r\n            ctx.rotate(imgObj.rotation * Math.PI / 180)\r\n            ctx.translate(-pX, -pY)\r\n            ctx.rect(imgObj.x, imgObj.y, imgObj.width, imgObj.height)\r\n          }\r\n        })\r\n        shape = new Konva.Rect({\r\n          x: imgObj.x,\r\n          y: imgObj.y,\r\n          width: imgObj.width,\r\n          height: imgObj.height,\r\n          stroke: 'black',\r\n          strokeWidth: 2\r\n        })\r\n      }\r\n      group.add(shape)\r\n      group.on('click', () => {\r\n        this.currentGroup = group\r\n        this.dialogVisible = true\r\n      })\r\n      this.layer.add(group)\r\n      this.layer.draw()\r\n    },\r\n    addTextShapes (textObj) {\r\n      const text = new Konva.Text({\r\n        x: textObj.x,\r\n        y: textObj.y,\r\n        width: textObj.width,\r\n        height: textObj.height,\r\n        stroke: '#808080',\r\n        strokeWidth: 1,\r\n        text: '点我输入文字',\r\n        fontSize: 30,\r\n        fontFamily: 'serif'\r\n      })\r\n      text.on('click', () => {\r\n        this.inputText(text)\r\n      })\r\n      this.layer.add(text)\r\n      this.layer.draw()\r\n    }\r\n  },\r\n  mounted () {\r\n    this.stage = new Konva.Stage({\r\n      container: 'myCanvas',\r\n      width: 800,\r\n      height: 600\r\n    })\r\n    const bgLayer = new Konva.Layer()\r\n    this.layer = new Konva.Layer()\r\n    this.stage.add(bgLayer)\r\n    this.stage.add(this.layer)\r\n    bgLayer.moveToBottom()\r\n    this.$root.bus.$on('bgChange', (bgUrl) => {\r\n      bgLayer.find('.background').destroy()\r\n      const bgImgObj = new Image()\r\n      bgImgObj.src = bgUrl\r\n      bgImgObj.onload = () => {\r\n        const img = new Konva.Image({\r\n          name: 'background',\r\n          image: bgImgObj\r\n        })\r\n        bgLayer.add(img)\r\n        img.moveToBottom()\r\n        bgLayer.draw()\r\n        this.saveImage()\r\n      }\r\n    })\r\n    this.$root.bus.$on('layoutChange', (layout) => {\r\n      this.layout = layout\r\n      this.layer.removeChildren()\r\n      layout.img.map((item) => {\r\n        this.addImgShapes(item)\r\n      })\r\n      layout.text.map((item) => {\r\n        this.addTextShapes(item)\r\n      })\r\n      this.saveImage()\r\n    })\r\n  }\r\n}\r\n</script>\r\n<style scoped>\r\n  #container {\r\n    position: relative;\r\n  }\r\n  #myCanvas {\r\n    position: relative;\r\n  }\r\n  img.savedImg {\r\n    position: absolute;\r\n    max-width:100%;\r\n    max-height:100%;\r\n    left: 0;\r\n    top: 0;\r\n    bottom: 0;\r\n    right: 0;\r\n    margin: auto;\r\n  }\r\n  div.img-btn {\r\n    opacity: 0;\r\n    position: absolute;\r\n    height: 50%;\r\n    z-index: 2;\r\n    left: 0;\r\n    top: 0;\r\n    bottom: 0;\r\n    right: 0;\r\n    margin: auto;\r\n  }\r\n  .el-button{\r\n    margin:5px;\r\n  }\r\n  .el-col {\r\n    position: relative;\r\n    height: 166px;\r\n    margin: 0 1.5%;\r\n  }\r\n  .el-col:hover {\r\n    border: 8px solid #00B6C9\r\n  }\r\n  .el-col:hover .savedImg {\r\n    opacity: 0.5;\r\n  }\r\n  .el-col:hover .img-btn {\r\n    opacity: 1;\r\n  }\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/canvas.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"container\"}},[_c('el-dialog',{attrs:{\"title\":\"图片选择\",\"width\":\"540\",\"visible\":_vm.dialogVisible},on:{\"update:visible\":function($event){_vm.dialogVisible=$event}}},[_c('div',{staticClass:\"thumbs\"},[_c('el-row',_vm._l((_vm.images),function(item,index){return _c('el-col',{key:index,attrs:{\"span\":5}},[_c('div',{staticClass:\"img-btn\"},[_c('el-button',{attrs:{\"type\":\"success\",\"size\":\"mini\",\"round\":\"\"},on:{\"click\":function($event){_vm.drawImage(item);}}},[_vm._v(\"选择图片\")]),_vm._v(\" \"),_c('br'),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"danger\",\"size\":\"mini\",\"round\":\"\"},on:{\"click\":function($event){_vm.images.splice(index, 1)}}},[_vm._v(\"删除图片\")])],1),_vm._v(\" \"),_c('img',{staticClass:\"savedImg\",attrs:{\"src\":item,\"alt\":(\"保存的图片\" + index)}})])}))],1),_vm._v(\" \"),_c('div',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-input',{attrs:{\"placeholder\":\"手动输入图片URL\"},model:{value:(_vm.inputUrl),callback:function ($$v) {_vm.inputUrl=$$v},expression:\"inputUrl\"}},[_c('el-button',{attrs:{\"slot\":\"append\",\"icon\":\"el-icon-upload2\",\"size\":\"small\"},on:{\"click\":function($event){_vm.images.push(_vm.inputUrl)}},slot:\"append\"})],1),_vm._v(\" \"),_c('input',{attrs:{\"type\":\"file\",\"id\":\"fileup\",\"accept\":\".jpg, .jpeg, .png, .gif\"},on:{\"change\":_vm.uploadImage}}),_vm._v(\" \"),_c('el-button',{on:{\"click\":function($event){_vm.dialogVisible = false}}},[_vm._v(\"取 消\")])],1)]),_vm._v(\" \"),_c('el-popover',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.textShow),expression:\"textShow\"}],attrs:{\"placement\":\"right\",\"width\":\"210\"}},[_c('textarea',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.textShow),expression:\"textShow\"}],ref:\"textarea\",attrs:{\"slot\":\"reference\",\"autofocus\":\"\"},slot:\"reference\"}),_vm._v(\" \"),_c('div',[_c('el-select',{on:{\"change\":_vm.changeTextStyle},model:{value:(_vm.fontStyle.fontFamily),callback:function ($$v) {_vm.$set(_vm.fontStyle, \"fontFamily\", $$v)},expression:\"fontStyle.fontFamily\"}},_vm._l((_vm.fontFamilys),function(item){return _c('el-option',{key:item,attrs:{\"label\":item,\"value\":item}})})),_vm._v(\" \"),_c('el-color-picker',{on:{\"change\":_vm.changeTextStyle},model:{value:(_vm.fontStyle.color),callback:function ($$v) {_vm.$set(_vm.fontStyle, \"color\", $$v)},expression:\"fontStyle.color\"}}),_vm._v(\" \"),_c('el-input-number',{attrs:{\"label\":\"字体\",\"size\":\"small\"},on:{\"change\":_vm.changeTextStyle},model:{value:(_vm.fontStyle.fontSize),callback:function ($$v) {_vm.$set(_vm.fontStyle, \"fontSize\", $$v)},expression:\"fontStyle.fontSize\"}}),_vm._v(\" \"),_c('el-radio-group',{attrs:{\"size\":\"medium\"},on:{\"change\":_vm.changeTextStyle},model:{value:(_vm.fontStyle.textAlign),callback:function ($$v) {_vm.$set(_vm.fontStyle, \"textAlign\", $$v)},expression:\"fontStyle.textAlign\"}},[_c('el-radio-button',{attrs:{\"label\":\"left\"}},[_vm._v(\"靠左\")]),_vm._v(\" \"),_c('el-radio-button',{attrs:{\"label\":\"center\"}},[_vm._v(\"居中\")]),_vm._v(\" \"),_c('el-radio-button',{attrs:{\"label\":\"right\"}},[_vm._v(\"靠右\")])],1)],1)]),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"myCanvas\"}}),_vm._v(\" \"),_c('el-button',{attrs:{\"plain\":\"\"},on:{\"click\":function($event){_vm.$root.bus.$emit('layoutChange', _vm.layout)}}},[_vm._v(\"清空重做\")])],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.5.0@vue-loader/lib/template-compiler?{\"id\":\"data-v-b786b7d2\",\"hasScoped\":true,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.5.0@vue-loader/lib/selector.js?type=template&index=0!./src/components/canvas.vue\n// module id = null\n// module chunks = ","<template>\r\n  <div id=\"container\">\r\n    <div id=\"p-container\" class=\"container\">\r\n    </div>\r\n    <div id=\"images-back\">\r\n      <img src=\"/static/img/cup-back.png\" />\r\n    </div>\r\n        <div id=\"images-front\">\r\n      <img src=\"/static/img/cup-front.png\" />\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import * as THREE from 'three'\r\n  export default {\r\n    name: 'preview',\r\n    data () {\r\n      return {\r\n        scene: null,\r\n        camera: null,\r\n        renderer: null\r\n      }\r\n    },\r\n    methods: {\r\n      initScene () {\r\n        const container = document.getElementById('p-container')\r\n        this.scene = new THREE.Scene()\r\n        // this.scene.background = new THREE.Color()\r\n        this.camera = new THREE.PerspectiveCamera(45, 225 / 475, 1, 2000)\r\n        this.camera.position.y = 400\r\n        this.scene.add(this.camera)\r\n        this.renderer = new THREE.WebGLRenderer({alpha: true})\r\n        this.renderer.setPixelRatio(window.devicePixelRatio)\r\n        this.renderer.setSize(225, 475)\r\n        container.appendChild(this.renderer.domElement)\r\n        const ambientLight = new THREE.AmbientLight(0xffffff, 1)\r\n        this.scene.add(ambientLight)\r\n      },\r\n      renderCup () {\r\n        const cylinderGeo = new THREE.CylinderGeometry(155, 128, 585, 40, 5, true)\r\n        const texture = new THREE.TextureLoader().load('/static/img/bg1.png', (tex) => {\r\n          texture.wrapS = texture.wrapT = THREE.RepeatWrapping\r\n          texture.anisotropy = 16\r\n          const cylinderMat = new THREE.MeshPhongMaterial({\r\n            map: texture,\r\n            side: THREE.DoubleSide,\r\n            opacity: 0.8,\r\n            transparent: true\r\n          })\r\n          const cylinderMesh = new THREE.Mesh(cylinderGeo, cylinderMat)\r\n          cylinderMesh.position.set(0, -40, 0)\r\n          this.scene.add(cylinderMesh)\r\n          this.camera.position.z = 800\r\n          this.camera.lookAt(this.scene.position)\r\n          const animate = () => {\r\n            requestAnimationFrame(animate)\r\n            cylinderMesh.rotation.y += 0.01\r\n            this.renderer.render(this.scene, this.camera)\r\n          }\r\n          animate()\r\n          // this.renderer.render(this.scene, this.camera)\r\n          this.$root.bus.$on('canvasChange', (url) => {\r\n            this.updateTexture(cylinderMesh, url)\r\n          })\r\n        })\r\n      },\r\n      updateTexture (mesh, url) {\r\n        mesh.material.map = new THREE.TextureLoader().load(url)\r\n        mesh.material.needsUpdate = true\r\n      }\r\n    },\r\n    mounted () {\r\n      this.initScene()\r\n      this.renderCup()\r\n    }\r\n  }\r\n</script>\r\n\r\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\r\n<style scoped>\r\n  div#container {\r\n    width:100%;\r\n    height:100%;\r\n    position: relative;\r\n  }\r\n  div#p-container {\r\n    width: 225px;\r\n    height: 475px;\r\n    z-index: 2;\r\n    position: absolute;\r\n  }\r\n  div#images-back{\r\n    position: absolute;\r\n    z-index: 1;\r\n  }\r\n  div#images-front{\r\n    position: absolute;\r\n    z-index: 3;\r\n  }\r\n  canvas { \r\n    width: 100%; \r\n    height: 100%; \r\n  }\r\n</style>\n\n\n// WEBPACK FOOTER //\n// src/components/preview.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _vm._m(0,false,false)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"container\"}},[_c('div',{staticClass:\"container\",attrs:{\"id\":\"p-container\"}}),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"images-back\"}},[_c('img',{attrs:{\"src\":\"/static/img/cup-back.png\"}})]),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"images-front\"}},[_c('img',{attrs:{\"src\":\"/static/img/cup-front.png\"}})])])}]\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.5.0@vue-loader/lib/template-compiler?{\"id\":\"data-v-4b05c604\",\"hasScoped\":true,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.5.0@vue-loader/lib/selector.js?type=template&index=0!./src/components/preview.vue\n// module id = null\n// module chunks = ","<template>\r\n  <div class=\"cup\">\r\n    <el-popover ref=\"bg-popup\" placement= \"right\" trigger= \"click\" width=\"400\" v-model=\"bgListVisible\">\r\n      <el-row :gutter=\"24\">\r\n        <el-col :span=\"12\" v-for=\"(item, index) in bgList\" :key=\"index\">\r\n          <el-button @click=\"changeBackground(index)\">\r\n            <img :src=\"item.url\" :alt=\"`背景图${index}`\">\r\n          </el-button>\r\n        </el-col>\r\n      </el-row>\r\n    </el-popover>\r\n    <el-popover ref=\"layout-popup\" placement= \"right\" trigger= \"click\" width=\"400\"  v-model=\"layoutListVisible\">\r\n      <el-row :gutter=\"24\">\r\n        <el-col :span=\"12\" v-for=\"(item, index) in layoutList\" :key=\"index\">\r\n          <el-button @click=\"changeLayout(index)\">\r\n            <img :src=\"item.url\" :alt=\"`layout${index}`\">\r\n          </el-button>\r\n        </el-col>\r\n      </el-row>\r\n    </el-popover>\r\n    <el-container>\r\n      <el-aside>\r\n        <ul>\r\n          <li>\r\n            <el-button plain v-popover:bg-popup>更换背景</el-button>\r\n          </li>\r\n          <li>\r\n            <el-button plain v-popover:layout-popup>更换布局</el-button>\r\n          </li>\r\n        </ul>\r\n      </el-aside>\r\n      <el-main>\r\n        <my-canvas></my-canvas>\r\n      </el-main>\r\n      <el-aside>\r\n        <preview />\r\n      </el-aside>\r\n    </el-container>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import myCanvas from './canvas'\r\n  import preview from './preview'\r\n  const bl = require('../model/bg-list.json')\r\n  const ll = require('../model/layout-list.json')\r\n  export default {\r\n    name: 'cup',\r\n    components: {\r\n      myCanvas,\r\n      preview\r\n    },\r\n    methods: {\r\n      changeBackground (index) {\r\n        this.bgUrl = this.bgList[index].url\r\n        this.bgListVisible = false\r\n        this.$root.bus.$emit('bgChange', this.bgUrl)\r\n      },\r\n      changeLayout (index) {\r\n        this.layout = this.layoutList[index].layout\r\n        this.layoutListVisible = false\r\n        this.$root.bus.$emit('layoutChange', this.layout)\r\n      }\r\n    },\r\n    beforeMount () {\r\n      this.bgList = bl\r\n      this.layoutList = ll\r\n    },\r\n    mounted () {\r\n      this.changeBackground(0)\r\n      this.changeLayout(0)\r\n    },\r\n    data () {\r\n      return {\r\n        bgListVisible: false,\r\n        bgList: [],\r\n        bgUrl: '',\r\n        layoutListVisible: false,\r\n        layoutList: [],\r\n        layout: {}\r\n      }\r\n    }\r\n  }\r\n</script>\r\n\r\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\r\n<style scoped>\r\n  li {\r\n    list-style-type: none;\r\n  }\r\n  img {\r\n    width: 100%;\r\n    height: auto;\r\n  }\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/cup.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"cup\"},[_c('el-popover',{ref:\"bg-popup\",attrs:{\"placement\":\"right\",\"trigger\":\"click\",\"width\":\"400\"},model:{value:(_vm.bgListVisible),callback:function ($$v) {_vm.bgListVisible=$$v},expression:\"bgListVisible\"}},[_c('el-row',{attrs:{\"gutter\":24}},_vm._l((_vm.bgList),function(item,index){return _c('el-col',{key:index,attrs:{\"span\":12}},[_c('el-button',{on:{\"click\":function($event){_vm.changeBackground(index)}}},[_c('img',{attrs:{\"src\":item.url,\"alt\":(\"背景图\" + index)}})])],1)}))],1),_vm._v(\" \"),_c('el-popover',{ref:\"layout-popup\",attrs:{\"placement\":\"right\",\"trigger\":\"click\",\"width\":\"400\"},model:{value:(_vm.layoutListVisible),callback:function ($$v) {_vm.layoutListVisible=$$v},expression:\"layoutListVisible\"}},[_c('el-row',{attrs:{\"gutter\":24}},_vm._l((_vm.layoutList),function(item,index){return _c('el-col',{key:index,attrs:{\"span\":12}},[_c('el-button',{on:{\"click\":function($event){_vm.changeLayout(index)}}},[_c('img',{attrs:{\"src\":item.url,\"alt\":(\"layout\" + index)}})])],1)}))],1),_vm._v(\" \"),_c('el-container',[_c('el-aside',[_c('ul',[_c('li',[_c('el-button',{directives:[{name:\"popover\",rawName:\"v-popover:bg-popup\",arg:\"bg-popup\"}],attrs:{\"plain\":\"\"}},[_vm._v(\"更换背景\")])],1),_vm._v(\" \"),_c('li',[_c('el-button',{directives:[{name:\"popover\",rawName:\"v-popover:layout-popup\",arg:\"layout-popup\"}],attrs:{\"plain\":\"\"}},[_vm._v(\"更换布局\")])],1)])]),_vm._v(\" \"),_c('el-main',[_c('my-canvas')],1),_vm._v(\" \"),_c('el-aside',[_c('preview')],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.5.0@vue-loader/lib/template-compiler?{\"id\":\"data-v-a21018a4\",\"hasScoped\":true,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.5.0@vue-loader/lib/selector.js?type=template&index=0!./src/components/cup.vue\n// module id = null\n// module chunks = ","<template>\r\n  <div id=\"app\">\r\n    <cup />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport cup from './components/cup'\r\n// import preview from './components/preview'\r\n\r\nexport default {\r\n  name: 'app',\r\n  components: {\r\n    cup\r\n  }\r\n}\r\n</script>\r\n\r\n<style>\r\n#app {\r\n  font-family: 'Avenir', Helvetica, Arial, sans-serif;\r\n  -webkit-font-smoothing: antialiased;\r\n  -moz-osx-font-smoothing: grayscale;\r\n  text-align: center;\r\n  color: #2c3e50;\r\n  margin-top: 60px;\r\n}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/App.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('cup')],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.5.0@vue-loader/lib/template-compiler?{\"id\":\"data-v-bee39478\",\"hasScoped\":false,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.5.0@vue-loader/lib/selector.js?type=template&index=0!./src/App.vue\n// module id = null\n// module chunks = ","// The Vue build version to load with the `import` command\r\n// (runtime-only or standalone) has been set in webpack.base.conf with an alias.\r\nimport Vue from 'vue'\r\nimport ElementUI from 'element-ui'\r\nimport 'element-ui/lib/theme-chalk/index.css'\r\nimport App from './App'\r\n\r\nVue.config.productionTip = false\r\nVue.use(ElementUI)\r\n/* eslint-disable no-new */\r\nnew Vue({\r\n  el: '#app',\r\n  template: '<App/>',\r\n  components: { App },\r\n  data: {\r\n    bus: new Vue()\r\n  }\r\n})\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.js"],"sourceRoot":""}