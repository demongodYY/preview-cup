{"version":3,"sources":["webpack:///static/js/app.c5b913c2e5643ae6749f.js","webpack:///./src/model/layout-list.json","webpack:///./src/model/bg-list.json","webpack:///./src/components/canvas.vue","webpack:///./src/components/preview.vue","webpack:///./src/components/cup.vue","webpack:///./src/App.vue","webpack:///src/components/canvas.vue","webpack:///./src/components/canvas.vue?334c","webpack:///src/components/preview.vue","webpack:///./src/components/preview.vue?a163","webpack:///src/components/cup.vue","webpack:///./src/components/cup.vue?6ca1","webpack:///src/App.vue","webpack:///./src/App.vue?1ea6","webpack:///./src/main.js"],"names":["webpackJsonp","/IO3","module","exports","name","url","layout","img","type","x","y","r","text","width","height","H9h6","NHnr","__webpack_exports__","__webpack_require__","injectStyle","ssrContext","preview_injectStyle","cup_injectStyle","App_injectStyle","Object","defineProperty","value","vue_esm","element_ui_common","element_ui_common_default","n","konva","konva_default","canvas","data","textShow","layer","stage","dialogVisible","currentGroup","images","methods","saveImage","dataUrl","this","toDataURL","$root","bus","$emit","inputText","_this","textarea","$refs","textPosition","position","style","fontSize","fontFamily","top","left","addEventListener","e","keyCode","draw","drawImage","_this2","shape","sWidth","sHeight","pX","pY","hasChildren","findOne","size","imgObj","Image","src","onload","a","image","draggable","add","uploadImage","_this3","fileUp","document","getElementById","fr","FileReader","push","target","result","readAsDataURL","files","addImgShapes","_this4","group","Group","clipFunc","ctx","arc","Math","PI","circle","Circle","radius","stroke","strokeWidth","on","addTextShapes","textObj","_this5","Text","mounted","_this6","Stage","container","bgLayer","Layer","moveToBottom","$on","bgUrl","find","destroy","bgImgObj","removeChildren","map","item","render","_vm","_h","$createElement","_c","_self","attrs","id","title","visible","update:visible","$event","staticClass","_l","index","key","span","round","click","_v","splice","alt","slot","change","directives","rawName","expression","ref","autofocus","plain","disabled","staticRenderFns","esExports","components_canvas","normalizeComponent","__vue_styles__","Component","src_components_canvas","three_module","preview","scene","camera","renderer","initScene","alpha","setPixelRatio","window","devicePixelRatio","setSize","appendChild","domElement","ambientLight","renderCup","cylinderGeo","texture","load","tex","wrapS","wrapT","anisotropy","cylinderMat","side","opacity","transparent","cylinderMesh","set","z","lookAt","animate","requestAnimationFrame","rotation","updateTexture","mesh","material","needsUpdate","preview_render","_m","preview_staticRenderFns","preview_esExports","components_preview","preview_normalizeComponent","preview___vue_styles__","preview_Component","src_components_preview","bl","ll","cup","components","myCanvas","changeBackground","bgList","bgListVisible","changeLayout","layoutList","layoutListVisible","beforeMount","cup_render","placement","trigger","model","callback","$$v","gutter","arg","cup_staticRenderFns","cup_esExports","components_cup","cup_normalizeComponent","cup___vue_styles__","cup_Component","src_components_cup","App","App_render","App_staticRenderFns","App_esExports","selectortype_template_index_0_src_App","App_normalizeComponent","App___vue_styles__","App_Component","src_App","config","productionTip","use","el","template","OzmA","jSAi","nEl0","rK6t","u4D0"],"mappings":"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","file":"static/js/app.c5b913c2e5643ae6749f.js","sourcesContent":["webpackJsonp([1],{\n\n/***/ \"/IO3\":\n/***/ (function(module, exports) {\n\nmodule.exports = [{\"name\":\"layout1\",\"url\":\"/static/img/layout1.png\",\"layout\":{\"img\":[{\"type\":\"circle\",\"x\":200,\"y\":200,\"r\":130}],\"text\":[{\"x\":450,\"y\":200,\"width\":200,\"height\":100}]}},{\"name\":\"layout2\",\"url\":\"/static/img/layout2.png\",\"layout\":{\"img\":[{\"type\":\"circle\",\"x\":250,\"y\":200,\"r\":100},{\"type\":\"circle\",\"x\":550,\"y\":200,\"r\":100}],\"text\":[{\"x\":300,\"y\":400,\"width\":200,\"height\":100}]}}]\n\n/***/ }),\n\n/***/ \"H9h6\":\n/***/ (function(module, exports) {\n\nmodule.exports = [{\"name\":\"background1\",\"url\":\"/static/img/bg1.png\"},{\"name\":\"background2\",\"url\":\"/static/img/bg2.png\"}]\n\n/***/ }),\n\n/***/ \"NHnr\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n\n// EXTERNAL MODULE: ./node_modules/_vue@2.5.8@vue/dist/vue.esm.js\nvar vue_esm = __webpack_require__(\"TWX9\");\n\n// EXTERNAL MODULE: ./node_modules/_element-ui@2.0.5@element-ui/lib/element-ui.common.js\nvar element_ui_common = __webpack_require__(\"z5U/\");\nvar element_ui_common_default = /*#__PURE__*/__webpack_require__.n(element_ui_common);\n\n// EXTERNAL MODULE: ./node_modules/_element-ui@2.0.5@element-ui/lib/theme-chalk/index.css\nvar theme_chalk = __webpack_require__(\"rK6t\");\nvar theme_chalk_default = /*#__PURE__*/__webpack_require__.n(theme_chalk);\n\n// EXTERNAL MODULE: ./node_modules/_konva@1.7.6@konva/konva.js\nvar konva = __webpack_require__(\"S3zW\");\nvar konva_default = /*#__PURE__*/__webpack_require__.n(konva);\n\n// CONCATENATED MODULE: ./node_modules/_babel-loader@7.1.2@babel-loader/lib!./node_modules/_vue-loader@13.5.0@vue-loader/lib/selector.js?type=script&index=0!./src/components/canvas.vue\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\n\n/* harmony default export */ var canvas = ({\n  name: 'cupCanvas',\n  data: function data() {\n    return {\n      textShow: false,\n      layer: '',\n      stage: '',\n      dialogVisible: false,\n      currentGroup: '',\n      images: []\n    };\n  },\n\n  methods: {\n    saveImage: function saveImage() {\n      var dataUrl = this.stage.toDataURL();\n      this.$root.bus.$emit('canvasChange', dataUrl);\n    },\n    inputText: function inputText(text) {\n      var _this = this;\n\n      var textarea = this.$refs.textarea;\n      var textPosition = text.position();\n      textarea.value = text.text();\n      textarea.style.position = 'absolute';\n      textarea.style.fontSize = text.fontSize() + 'px';\n      textarea.style.fontFamily = text.fontFamily();\n      textarea.style.width = text.width() + 'px';\n      textarea.style.height = text.height() + 'px';\n      textarea.style.top = textPosition.y + 'px';\n      textarea.style.left = textPosition.x + 'px';\n      textarea.style['z-index'] = 1;\n      this.textShow = true;\n      textarea.addEventListener('keydown', function (e) {\n        if (e.keyCode === 13) {\n          text.text(textarea.value);\n          _this.layer.draw();\n          _this.textShow = false;\n          _this.saveImage();\n        }\n      });\n    },\n    drawImage: function drawImage(dataUrl) {\n      var _this2 = this;\n\n      var shape = void 0;\n      var sWidth = void 0;\n      var sHeight = void 0;\n      var pX = void 0;\n      var pY = void 0;\n      if (this.currentGroup.hasChildren('Circle')) {\n        shape = this.currentGroup.findOne('Circle');\n        sWidth = shape.size().width;\n        sHeight = shape.size().height;\n        pX = shape.position().x - sWidth / 2;\n        pY = shape.position().y - sHeight / 2;\n      } else if (this.currentGroup.hasChildren('Rect')) {\n        shape = this.currentGroup.findOne('Rect');\n        sWidth = shape.size().width;\n        sHeight = shape.size().height;\n        pX = shape.position().x;\n        pY = shape.position().y;\n      }\n      var imgObj = new Image();\n      imgObj.src = dataUrl;\n      imgObj.onload = function () {\n        var img = new konva_default.a.Image({\n          name: 'img',\n          image: imgObj,\n          width: sWidth,\n          height: sHeight,\n          x: pX,\n          y: pY,\n          draggable: true\n        });\n        _this2.currentGroup.add(img);\n        _this2.layer.draw();\n        _this2.saveImage();\n        _this2.dialogVisible = false;\n      };\n    },\n    uploadImage: function uploadImage() {\n      var _this3 = this;\n\n      var fileUp = document.getElementById('fileup');\n      var fr = new FileReader();\n      fr.onload = function (e) {\n        _this3.images.push(e.target.result);\n      };\n      fr.readAsDataURL(fileUp.files[0]);\n    },\n    addImgShapes: function addImgShapes(imgObj) {\n      var _this4 = this;\n\n      if (imgObj.type === 'circle') {\n        var group = new konva_default.a.Group({\n          clipFunc: function clipFunc(ctx) {\n            ctx.arc(imgObj.x, imgObj.y, imgObj.r, 0, Math.PI * 2);\n          }\n        });\n        var circle = new konva_default.a.Circle({\n          x: imgObj.x,\n          y: imgObj.y,\n          radius: imgObj.r,\n          stroke: 'black',\n          strokeWidth: 2\n        });\n        group.add(circle);\n        group.on('click', function () {\n          _this4.currentGroup = group;\n          _this4.dialogVisible = true;\n        });\n        this.layer.add(group);\n        this.layer.draw();\n      }\n    },\n    addTextShapes: function addTextShapes(textObj) {\n      var _this5 = this;\n\n      var text = new konva_default.a.Text({\n        x: textObj.x,\n        y: textObj.y,\n        width: textObj.width,\n        height: textObj.height,\n        stroke: 'blue',\n        strokeWidth: 1,\n        text: '点我输入文字',\n        fontSize: 30,\n        fontFamily: 'Calibri'\n      });\n      text.on('click', function () {\n        _this5.inputText(text);\n      });\n      this.layer.add(text);\n      this.layer.draw();\n    }\n  },\n  mounted: function mounted() {\n    var _this6 = this;\n\n    this.stage = new konva_default.a.Stage({\n      container: 'myCanvas',\n      width: 800,\n      height: 600\n    });\n    var bgLayer = new konva_default.a.Layer();\n    this.layer = new konva_default.a.Layer();\n    this.stage.add(bgLayer);\n    this.stage.add(this.layer);\n    bgLayer.moveToBottom();\n    this.$root.bus.$on('bgChange', function (bgUrl) {\n      bgLayer.find('.background').destroy();\n      var bgImgObj = new Image();\n      bgImgObj.src = bgUrl;\n      bgImgObj.onload = function () {\n        var img = new konva_default.a.Image({\n          name: 'background',\n          image: bgImgObj\n        });\n        bgLayer.add(img);\n        img.moveToBottom();\n        bgLayer.draw();\n        _this6.saveImage();\n      };\n    });\n    this.$root.bus.$on('layoutChange', function (layout) {\n      _this6.layer.removeChildren();\n      layout.img.map(function (item) {\n        _this6.addImgShapes(item);\n      });\n      layout.text.map(function (item) {\n        _this6.addTextShapes(item);\n      });\n      _this6.saveImage();\n    });\n  }\n});\n// CONCATENATED MODULE: ./node_modules/_vue-loader@13.5.0@vue-loader/lib/template-compiler?{\"id\":\"data-v-6a70c0d2\",\"hasScoped\":true,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.5.0@vue-loader/lib/selector.js?type=template&index=0!./src/components/canvas.vue\nvar render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"container\"}},[_c('el-dialog',{attrs:{\"title\":\"图片选择\",\"width\":\"540\",\"visible\":_vm.dialogVisible},on:{\"update:visible\":function($event){_vm.dialogVisible=$event}}},[_c('div',{staticClass:\"thumbs\"},[_c('el-row',_vm._l((_vm.images),function(item,index){return _c('el-col',{key:index,attrs:{\"span\":5}},[_c('div',{staticClass:\"img-btn\"},[_c('el-button',{attrs:{\"type\":\"success\",\"size\":\"mini\",\"round\":\"\"},on:{\"click\":function($event){_vm.drawImage(item);}}},[_vm._v(\"选择图片\")]),_vm._v(\" \"),_c('br'),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"danger\",\"size\":\"mini\",\"round\":\"\"},on:{\"click\":function($event){_vm.images.splice(index, 1)}}},[_vm._v(\"删除图片\")])],1),_vm._v(\" \"),_c('img',{staticClass:\"savedImg\",attrs:{\"src\":item,\"alt\":(\"保存的图片\" + index)}})])}))],1),_vm._v(\" \"),_c('div',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('input',{attrs:{\"type\":\"file\",\"id\":\"fileup\"},on:{\"change\":_vm.uploadImage}}),_vm._v(\" \"),_c('el-button',{on:{\"click\":function($event){_vm.dialogVisible = false}}},[_vm._v(\"取 消\")])],1)]),_vm._v(\" \"),_c('textarea',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.textShow),expression:\"textShow\"}],ref:\"textarea\",attrs:{\"autofocus\":\"\"}}),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"myCanvas\"}}),_vm._v(\" \"),_c('el-button',{attrs:{\"plain\":\"\",\"disabled\":\"\"}},[_vm._v(\"上一步\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"plain\":\"\",\"disabled\":\"\"}},[_vm._v(\"下一步\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"plain\":\"\",\"disabled\":\"\"}},[_vm._v(\"清空重做\")])],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\n/* harmony default export */ var components_canvas = (esExports);\n// CONCATENATED MODULE: ./src/components/canvas.vue\nfunction injectStyle (ssrContext) {\n  __webpack_require__(\"u4D0\")\n}\nvar normalizeComponent = __webpack_require__(\"/Xao\")\n/* script */\n\n/* template */\n\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-6a70c0d2\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  canvas,\n  components_canvas,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\n/* harmony default export */ var src_components_canvas = (Component.exports);\n\n// EXTERNAL MODULE: ./node_modules/_three@0.88.0@three/build/three.module.js\nvar three_module = __webpack_require__(\"Lsr5\");\n\n// CONCATENATED MODULE: ./node_modules/_babel-loader@7.1.2@babel-loader/lib!./node_modules/_vue-loader@13.5.0@vue-loader/lib/selector.js?type=script&index=0!./src/components/preview.vue\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\n/* harmony default export */ var preview = ({\n  name: 'preview',\n  data: function data() {\n    return {\n      scene: null,\n      camera: null,\n      renderer: null\n    };\n  },\n\n  methods: {\n    initScene: function initScene() {\n      var container = document.getElementById('p-container');\n      this.scene = new three_module[\"h\" /* Scene */]();\n      // this.scene.background = new THREE.Color()\n      this.camera = new three_module[\"f\" /* PerspectiveCamera */](45, 225 / 475, 1, 2000);\n      this.camera.position.y = 400;\n      this.scene.add(this.camera);\n      this.renderer = new three_module[\"j\" /* WebGLRenderer */]({ alpha: true });\n      this.renderer.setPixelRatio(window.devicePixelRatio);\n      this.renderer.setSize(225, 475);\n      container.appendChild(this.renderer.domElement);\n      var ambientLight = new three_module[\"a\" /* AmbientLight */](0xffffff, 1);\n      this.scene.add(ambientLight);\n    },\n    renderCup: function renderCup() {\n      var _this = this;\n\n      var cylinderGeo = new three_module[\"b\" /* CylinderGeometry */](155, 128, 585, 40, 5, true);\n      var texture = new three_module[\"i\" /* TextureLoader */]().load('/static/img/bg1.png', function (tex) {\n        texture.wrapS = texture.wrapT = three_module[\"g\" /* RepeatWrapping */];\n        texture.anisotropy = 16;\n        var cylinderMat = new three_module[\"e\" /* MeshPhongMaterial */]({\n          map: texture,\n          side: three_module[\"c\" /* DoubleSide */],\n          opacity: 0.8,\n          transparent: true\n        });\n        var cylinderMesh = new three_module[\"d\" /* Mesh */](cylinderGeo, cylinderMat);\n        cylinderMesh.position.set(0, -40, 0);\n        _this.scene.add(cylinderMesh);\n        _this.camera.position.z = 800;\n        _this.camera.lookAt(_this.scene.position);\n        var animate = function animate() {\n          requestAnimationFrame(animate);\n          cylinderMesh.rotation.y += 0.01;\n          _this.renderer.render(_this.scene, _this.camera);\n        };\n        animate();\n        // this.renderer.render(this.scene, this.camera)\n        _this.$root.bus.$on('canvasChange', function (url) {\n          _this.updateTexture(cylinderMesh, url);\n        });\n      });\n    },\n    updateTexture: function updateTexture(mesh, url) {\n      mesh.material.map = new three_module[\"i\" /* TextureLoader */]().load(url);\n      mesh.material.needsUpdate = true;\n    }\n  },\n  mounted: function mounted() {\n    this.initScene();\n    this.renderCup();\n  }\n});\n// CONCATENATED MODULE: ./node_modules/_vue-loader@13.5.0@vue-loader/lib/template-compiler?{\"id\":\"data-v-4b05c604\",\"hasScoped\":true,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.5.0@vue-loader/lib/selector.js?type=template&index=0!./src/components/preview.vue\nvar preview_render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _vm._m(0,false,false)}\nvar preview_staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"container\"}},[_c('div',{staticClass:\"container\",attrs:{\"id\":\"p-container\"}}),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"images-back\"}},[_c('img',{attrs:{\"src\":\"/static/img/cup-back.png\"}})]),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"images-front\"}},[_c('img',{attrs:{\"src\":\"/static/img/cup-front.png\"}})])])}]\nvar preview_esExports = { render: preview_render, staticRenderFns: preview_staticRenderFns }\n/* harmony default export */ var components_preview = (preview_esExports);\n// CONCATENATED MODULE: ./src/components/preview.vue\nfunction preview_injectStyle (ssrContext) {\n  __webpack_require__(\"OzmA\")\n}\nvar preview_normalizeComponent = __webpack_require__(\"/Xao\")\n/* script */\n\n/* template */\n\n/* template functional */\nvar preview___vue_template_functional__ = false\n/* styles */\nvar preview___vue_styles__ = preview_injectStyle\n/* scopeId */\nvar preview___vue_scopeId__ = \"data-v-4b05c604\"\n/* moduleIdentifier (server only) */\nvar preview___vue_module_identifier__ = null\nvar preview_Component = preview_normalizeComponent(\n  preview,\n  components_preview,\n  preview___vue_template_functional__,\n  preview___vue_styles__,\n  preview___vue_scopeId__,\n  preview___vue_module_identifier__\n)\n\n/* harmony default export */ var src_components_preview = (preview_Component.exports);\n\n// CONCATENATED MODULE: ./node_modules/_babel-loader@7.1.2@babel-loader/lib!./node_modules/_vue-loader@13.5.0@vue-loader/lib/selector.js?type=script&index=0!./src/components/cup.vue\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\n\nvar bl = __webpack_require__(\"H9h6\");\nvar ll = __webpack_require__(\"/IO3\");\n/* harmony default export */ var cup = ({\n  name: 'cup',\n  components: {\n    myCanvas: src_components_canvas,\n    preview: src_components_preview\n  },\n  methods: {\n    changeBackground: function changeBackground(index) {\n      this.bgUrl = this.bgList[index].url;\n      this.bgListVisible = false;\n      this.$root.bus.$emit('bgChange', this.bgUrl);\n    },\n    changeLayout: function changeLayout(index) {\n      this.layout = this.layoutList[index].layout;\n      this.layoutListVisible = false;\n      this.$root.bus.$emit('layoutChange', this.layout);\n    }\n  },\n  beforeMount: function beforeMount() {\n    this.bgList = bl;\n    this.layoutList = ll;\n  },\n  mounted: function mounted() {\n    this.changeBackground(0);\n  },\n  data: function data() {\n    return {\n      bgListVisible: false,\n      bgList: [],\n      bgUrl: '',\n      layoutListVisible: false,\n      layoutList: [],\n      layout: {}\n    };\n  }\n});\n// CONCATENATED MODULE: ./node_modules/_vue-loader@13.5.0@vue-loader/lib/template-compiler?{\"id\":\"data-v-b72494fa\",\"hasScoped\":true,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.5.0@vue-loader/lib/selector.js?type=template&index=0!./src/components/cup.vue\nvar cup_render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"cup\"},[_c('el-popover',{ref:\"bg-popup\",attrs:{\"placement\":\"right\",\"trigger\":\"click\",\"width\":\"400\"},model:{value:(_vm.bgListVisible),callback:function ($$v) {_vm.bgListVisible=$$v},expression:\"bgListVisible\"}},[_c('el-row',{attrs:{\"gutter\":24}},_vm._l((_vm.bgList),function(item,index){return _c('el-col',{key:index,attrs:{\"span\":12}},[_c('el-button',{on:{\"click\":function($event){_vm.changeBackground(index)}}},[_c('img',{attrs:{\"src\":item.url,\"alt\":(\"背景图\" + index)}})])],1)}))],1),_vm._v(\" \"),_c('el-popover',{ref:\"layout-popup\",attrs:{\"placement\":\"right\",\"trigger\":\"click\",\"width\":\"400\"},model:{value:(_vm.layoutListVisible),callback:function ($$v) {_vm.layoutListVisible=$$v},expression:\"layoutListVisible\"}},[_c('el-row',{attrs:{\"gutter\":24}},_vm._l((_vm.layoutList),function(item,index){return _c('el-col',{key:index,attrs:{\"span\":12}},[_c('el-button',{on:{\"click\":function($event){_vm.changeLayout(index)}}},[_c('img',{attrs:{\"src\":item.url,\"alt\":(\"layout\" + index)}})])],1)}))],1),_vm._v(\" \"),_c('el-container',[_c('el-aside',[_c('ul',[_c('li',[_c('el-button',{directives:[{name:\"popover\",rawName:\"v-popover:bg-popup\",arg:\"bg-popup\"}],attrs:{\"plain\":\"\"}},[_vm._v(\"更换背景\")])],1),_vm._v(\" \"),_c('li',[_c('el-button',{directives:[{name:\"popover\",rawName:\"v-popover:layout-popup\",arg:\"layout-popup\"}],attrs:{\"plain\":\"\"}},[_vm._v(\"更换布局\")])],1)])]),_vm._v(\" \"),_c('el-main',[_c('my-canvas')],1),_vm._v(\" \"),_c('el-aside',[_c('preview')],1)],1)],1)}\nvar cup_staticRenderFns = []\nvar cup_esExports = { render: cup_render, staticRenderFns: cup_staticRenderFns }\n/* harmony default export */ var components_cup = (cup_esExports);\n// CONCATENATED MODULE: ./src/components/cup.vue\nfunction cup_injectStyle (ssrContext) {\n  __webpack_require__(\"nEl0\")\n}\nvar cup_normalizeComponent = __webpack_require__(\"/Xao\")\n/* script */\n\n/* template */\n\n/* template functional */\nvar cup___vue_template_functional__ = false\n/* styles */\nvar cup___vue_styles__ = cup_injectStyle\n/* scopeId */\nvar cup___vue_scopeId__ = \"data-v-b72494fa\"\n/* moduleIdentifier (server only) */\nvar cup___vue_module_identifier__ = null\nvar cup_Component = cup_normalizeComponent(\n  cup,\n  components_cup,\n  cup___vue_template_functional__,\n  cup___vue_styles__,\n  cup___vue_scopeId__,\n  cup___vue_module_identifier__\n)\n\n/* harmony default export */ var src_components_cup = (cup_Component.exports);\n\n// CONCATENATED MODULE: ./node_modules/_babel-loader@7.1.2@babel-loader/lib!./node_modules/_vue-loader@13.5.0@vue-loader/lib/selector.js?type=script&index=0!./src/App.vue\n//\n//\n//\n//\n//\n//\n\n\n// import preview from './components/preview'\n\n/* harmony default export */ var App = ({\n  name: 'app',\n  components: {\n    cup: src_components_cup\n  }\n});\n// CONCATENATED MODULE: ./node_modules/_vue-loader@13.5.0@vue-loader/lib/template-compiler?{\"id\":\"data-v-bee39478\",\"hasScoped\":false,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.5.0@vue-loader/lib/selector.js?type=template&index=0!./src/App.vue\nvar App_render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('cup')],1)}\nvar App_staticRenderFns = []\nvar App_esExports = { render: App_render, staticRenderFns: App_staticRenderFns }\n/* harmony default export */ var selectortype_template_index_0_src_App = (App_esExports);\n// CONCATENATED MODULE: ./src/App.vue\nfunction App_injectStyle (ssrContext) {\n  __webpack_require__(\"jSAi\")\n}\nvar App_normalizeComponent = __webpack_require__(\"/Xao\")\n/* script */\n\n/* template */\n\n/* template functional */\nvar App___vue_template_functional__ = false\n/* styles */\nvar App___vue_styles__ = App_injectStyle\n/* scopeId */\nvar App___vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar App___vue_module_identifier__ = null\nvar App_Component = App_normalizeComponent(\n  App,\n  selectortype_template_index_0_src_App,\n  App___vue_template_functional__,\n  App___vue_styles__,\n  App___vue_scopeId__,\n  App___vue_module_identifier__\n)\n\n/* harmony default export */ var src_App = (App_Component.exports);\n\n// CONCATENATED MODULE: ./src/main.js\n// The Vue build version to load with the `import` command\n// (runtime-only or standalone) has been set in webpack.base.conf with an alias.\n\n\n\n\n\nvue_esm[\"default\"].config.productionTip = false;\nvue_esm[\"default\"].use(element_ui_common_default.a);\n/* eslint-disable no-new */\nnew vue_esm[\"default\"]({\n  el: '#app',\n  template: '<App/>',\n  components: { App: src_App },\n  data: {\n    bus: new vue_esm[\"default\"]()\n  }\n});\n\n/***/ }),\n\n/***/ \"OzmA\":\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ \"jSAi\":\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ \"nEl0\":\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ \"rK6t\":\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ \"u4D0\":\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ })\n\n},[\"NHnr\"]);\n\n\n// WEBPACK FOOTER //\n// static/js/app.c5b913c2e5643ae6749f.js","module.exports = [{\"name\":\"layout1\",\"url\":\"/static/img/layout1.png\",\"layout\":{\"img\":[{\"type\":\"circle\",\"x\":200,\"y\":200,\"r\":130}],\"text\":[{\"x\":450,\"y\":200,\"width\":200,\"height\":100}]}},{\"name\":\"layout2\",\"url\":\"/static/img/layout2.png\",\"layout\":{\"img\":[{\"type\":\"circle\",\"x\":250,\"y\":200,\"r\":100},{\"type\":\"circle\",\"x\":550,\"y\":200,\"r\":100}],\"text\":[{\"x\":300,\"y\":400,\"width\":200,\"height\":100}]}}]\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/model/layout-list.json\n// module id = /IO3\n// module chunks = 1","module.exports = [{\"name\":\"background1\",\"url\":\"/static/img/bg1.png\"},{\"name\":\"background2\",\"url\":\"/static/img/bg2.png\"}]\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/model/bg-list.json\n// module id = H9h6\n// module chunks = 1","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/_vue-loader@13.5.0@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-6a70c0d2\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../node_modules/_vue-loader@13.5.0@vue-loader/lib/selector?type=styles&index=0!./canvas.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/_vue-loader@13.5.0@vue-loader/lib/component-normalizer\")\n/* script */\nimport __vue_script__ from \"!!babel-loader!../../node_modules/_vue-loader@13.5.0@vue-loader/lib/selector?type=script&index=0!./canvas.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/_vue-loader@13.5.0@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-6a70c0d2\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":\\\"src\\\",\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/_vue-loader@13.5.0@vue-loader/lib/selector?type=template&index=0!./canvas.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-6a70c0d2\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/canvas.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/_vue-loader@13.5.0@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-4b05c604\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../node_modules/_vue-loader@13.5.0@vue-loader/lib/selector?type=styles&index=0!./preview.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/_vue-loader@13.5.0@vue-loader/lib/component-normalizer\")\n/* script */\nimport __vue_script__ from \"!!babel-loader!../../node_modules/_vue-loader@13.5.0@vue-loader/lib/selector?type=script&index=0!./preview.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/_vue-loader@13.5.0@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-4b05c604\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":\\\"src\\\",\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/_vue-loader@13.5.0@vue-loader/lib/selector?type=template&index=0!./preview.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-4b05c604\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/preview.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/_vue-loader@13.5.0@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-b72494fa\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../node_modules/_vue-loader@13.5.0@vue-loader/lib/selector?type=styles&index=0!./cup.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/_vue-loader@13.5.0@vue-loader/lib/component-normalizer\")\n/* script */\nimport __vue_script__ from \"!!babel-loader!../../node_modules/_vue-loader@13.5.0@vue-loader/lib/selector?type=script&index=0!./cup.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/_vue-loader@13.5.0@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-b72494fa\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":\\\"src\\\",\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/_vue-loader@13.5.0@vue-loader/lib/selector?type=template&index=0!./cup.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-b72494fa\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/cup.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../node_modules/_vue-loader@13.5.0@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-bee39478\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../node_modules/_vue-loader@13.5.0@vue-loader/lib/selector?type=styles&index=0!./App.vue\")\n}\nvar normalizeComponent = require(\"!../node_modules/_vue-loader@13.5.0@vue-loader/lib/component-normalizer\")\n/* script */\nimport __vue_script__ from \"!!babel-loader!../node_modules/_vue-loader@13.5.0@vue-loader/lib/selector?type=script&index=0!./App.vue\"\n/* template */\nimport __vue_template__ from \"!!../node_modules/_vue-loader@13.5.0@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-bee39478\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":\\\"src\\\",\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../node_modules/_vue-loader@13.5.0@vue-loader/lib/selector?type=template&index=0!./App.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/App.vue\n// module id = null\n// module chunks = ","<template>\r\n  <div id=\"container\">\r\n    <el-dialog title=\"图片选择\" width=\"540\" :visible.sync=\"dialogVisible\">\r\n      <div class=\"thumbs\">\r\n        <el-row>\r\n          <el-col :span=\"5\" v-for=\"(item, index) in images\" :key=\"index\">\r\n              <div class=\"img-btn\">\r\n                <el-button type=\"success\" size=\"mini\" round @click=\"drawImage(item);\">选择图片</el-button>\r\n                <br/>\r\n                <el-button type=\"danger\" size=\"mini\" round @click=\"images.splice(index, 1)\">删除图片</el-button>\r\n              </div>\r\n              <img :src=\"item\" :alt=\"`保存的图片${index}`\" class=\"savedImg\">\r\n          </el-col>\r\n      </el-row>\r\n      </div>\r\n      <div slot=\"footer\" class=\"dialog-footer\">\r\n        <input type=\"file\" id=\"fileup\" @change=\"uploadImage\"/>\r\n        <el-button @click=\"dialogVisible = false\">取 消</el-button>\r\n      </div>\r\n    </el-dialog>\r\n    <textarea\r\n      ref=\"textarea\"\r\n      autofocus\r\n      v-show=\"textShow\">\r\n    </textarea>\r\n    <div id=\"myCanvas\">\r\n    </div>\r\n    <el-button plain disabled>上一步</el-button>\r\n    <el-button plain disabled>下一步</el-button>\r\n    <el-button plain disabled>清空重做</el-button>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Konva from 'konva'\r\n\r\nexport default {\r\n  name: 'cupCanvas',\r\n  data () {\r\n    return {\r\n      textShow: false,\r\n      layer: '',\r\n      stage: '',\r\n      dialogVisible: false,\r\n      currentGroup: '',\r\n      images: []\r\n    }\r\n  },\r\n  methods: {\r\n    saveImage () {\r\n      const dataUrl = this.stage.toDataURL()\r\n      this.$root.bus.$emit('canvasChange', dataUrl)\r\n    },\r\n    inputText (text) {\r\n      const textarea = this.$refs.textarea\r\n      const textPosition = text.position()\r\n      textarea.value = text.text()\r\n      textarea.style.position = 'absolute'\r\n      textarea.style.fontSize = `${text.fontSize()}px`\r\n      textarea.style.fontFamily = text.fontFamily()\r\n      textarea.style.width = `${text.width()}px`\r\n      textarea.style.height = `${text.height()}px`\r\n      textarea.style.top = textPosition.y + 'px'\r\n      textarea.style.left = textPosition.x + 'px'\r\n      textarea.style['z-index'] = 1\r\n      this.textShow = true\r\n      textarea.addEventListener('keydown', (e) => {\r\n        if (e.keyCode === 13) {\r\n          text.text(textarea.value)\r\n          this.layer.draw()\r\n          this.textShow = false\r\n          this.saveImage()\r\n        }\r\n      })\r\n    },\r\n    drawImage (dataUrl) {\r\n      let shape\r\n      let sWidth\r\n      let sHeight\r\n      let pX\r\n      let pY\r\n      if (this.currentGroup.hasChildren('Circle')) {\r\n        shape = this.currentGroup.findOne('Circle')\r\n        sWidth = shape.size().width\r\n        sHeight = shape.size().height\r\n        pX = shape.position().x - sWidth / 2\r\n        pY = shape.position().y - sHeight / 2\r\n      } else if (this.currentGroup.hasChildren('Rect')) {\r\n        shape = this.currentGroup.findOne('Rect')\r\n        sWidth = shape.size().width\r\n        sHeight = shape.size().height\r\n        pX = shape.position().x\r\n        pY = shape.position().y\r\n      }\r\n      const imgObj = new Image()\r\n      imgObj.src = dataUrl\r\n      imgObj.onload = () => {\r\n        const img = new Konva.Image({\r\n          name: 'img',\r\n          image: imgObj,\r\n          width: sWidth,\r\n          height: sHeight,\r\n          x: pX,\r\n          y: pY,\r\n          draggable: true\r\n        })\r\n        this.currentGroup.add(img)\r\n        this.layer.draw()\r\n        this.saveImage()\r\n        this.dialogVisible = false\r\n      }\r\n    },\r\n    uploadImage () {\r\n      const fileUp = document.getElementById('fileup')\r\n      const fr = new FileReader()\r\n      fr.onload = (e) => {\r\n        this.images.push(e.target.result)\r\n      }\r\n      fr.readAsDataURL(fileUp.files[0])\r\n    },\r\n    addImgShapes (imgObj) {\r\n      if (imgObj.type === 'circle') {\r\n        const group = new Konva.Group({\r\n          clipFunc: (ctx) => {\r\n            ctx.arc(imgObj.x, imgObj.y, imgObj.r, 0, Math.PI * 2)\r\n          }\r\n        })\r\n        const circle = new Konva.Circle({\r\n          x: imgObj.x,\r\n          y: imgObj.y,\r\n          radius: imgObj.r,\r\n          stroke: 'black',\r\n          strokeWidth: 2\r\n        })\r\n        group.add(circle)\r\n        group.on('click', () => {\r\n          this.currentGroup = group\r\n          this.dialogVisible = true\r\n        })\r\n        this.layer.add(group)\r\n        this.layer.draw()\r\n      }\r\n    },\r\n    addTextShapes (textObj) {\r\n      const text = new Konva.Text({\r\n        x: textObj.x,\r\n        y: textObj.y,\r\n        width: textObj.width,\r\n        height: textObj.height,\r\n        stroke: 'blue',\r\n        strokeWidth: 1,\r\n        text: '点我输入文字',\r\n        fontSize: 30,\r\n        fontFamily: 'Calibri'\r\n      })\r\n      text.on('click', () => {\r\n        this.inputText(text)\r\n      })\r\n      this.layer.add(text)\r\n      this.layer.draw()\r\n    }\r\n  },\r\n  mounted () {\r\n    this.stage = new Konva.Stage({\r\n      container: 'myCanvas',\r\n      width: 800,\r\n      height: 600\r\n    })\r\n    const bgLayer = new Konva.Layer()\r\n    this.layer = new Konva.Layer()\r\n    this.stage.add(bgLayer)\r\n    this.stage.add(this.layer)\r\n    bgLayer.moveToBottom()\r\n    this.$root.bus.$on('bgChange', (bgUrl) => {\r\n      bgLayer.find('.background').destroy()\r\n      const bgImgObj = new Image()\r\n      bgImgObj.src = bgUrl\r\n      bgImgObj.onload = () => {\r\n        const img = new Konva.Image({\r\n          name: 'background',\r\n          image: bgImgObj\r\n        })\r\n        bgLayer.add(img)\r\n        img.moveToBottom()\r\n        bgLayer.draw()\r\n        this.saveImage()\r\n      }\r\n    })\r\n    this.$root.bus.$on('layoutChange', (layout) => {\r\n      this.layer.removeChildren()\r\n      layout.img.map((item) => {\r\n        this.addImgShapes(item)\r\n      })\r\n      layout.text.map((item) => {\r\n        this.addTextShapes(item)\r\n      })\r\n      this.saveImage()\r\n    })\r\n  }\r\n}\r\n</script>\r\n<style scoped>\r\n  #container {\r\n    position: relative;\r\n  }\r\n  #myCanvas {\r\n    position: relative;\r\n  }\r\n  img.savedImg {\r\n    position: absolute;\r\n    max-width:100%;\r\n    max-height:100%;\r\n    left: 0;\r\n    top: 0;\r\n    bottom: 0;\r\n    right: 0;\r\n    margin: auto;\r\n  }\r\n  div.img-btn {\r\n    opacity: 0;\r\n    position: absolute;\r\n    height: 50%;\r\n    z-index: 2;\r\n    left: 0;\r\n    top: 0;\r\n    bottom: 0;\r\n    right: 0;\r\n    margin: auto;\r\n  }\r\n  .el-button{\r\n    margin:5px;\r\n  }\r\n  .el-col {\r\n    position: relative;\r\n    height: 166px;\r\n    margin: 0 1.5%;\r\n  }\r\n  .el-col:hover {\r\n    border: 8px solid #00B6C9\r\n  }\r\n  .el-col:hover .savedImg {\r\n    opacity: 0.5;\r\n  }\r\n  .el-col:hover .img-btn {\r\n    opacity: 1;\r\n  }\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/canvas.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"container\"}},[_c('el-dialog',{attrs:{\"title\":\"图片选择\",\"width\":\"540\",\"visible\":_vm.dialogVisible},on:{\"update:visible\":function($event){_vm.dialogVisible=$event}}},[_c('div',{staticClass:\"thumbs\"},[_c('el-row',_vm._l((_vm.images),function(item,index){return _c('el-col',{key:index,attrs:{\"span\":5}},[_c('div',{staticClass:\"img-btn\"},[_c('el-button',{attrs:{\"type\":\"success\",\"size\":\"mini\",\"round\":\"\"},on:{\"click\":function($event){_vm.drawImage(item);}}},[_vm._v(\"选择图片\")]),_vm._v(\" \"),_c('br'),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"danger\",\"size\":\"mini\",\"round\":\"\"},on:{\"click\":function($event){_vm.images.splice(index, 1)}}},[_vm._v(\"删除图片\")])],1),_vm._v(\" \"),_c('img',{staticClass:\"savedImg\",attrs:{\"src\":item,\"alt\":(\"保存的图片\" + index)}})])}))],1),_vm._v(\" \"),_c('div',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('input',{attrs:{\"type\":\"file\",\"id\":\"fileup\"},on:{\"change\":_vm.uploadImage}}),_vm._v(\" \"),_c('el-button',{on:{\"click\":function($event){_vm.dialogVisible = false}}},[_vm._v(\"取 消\")])],1)]),_vm._v(\" \"),_c('textarea',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.textShow),expression:\"textShow\"}],ref:\"textarea\",attrs:{\"autofocus\":\"\"}}),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"myCanvas\"}}),_vm._v(\" \"),_c('el-button',{attrs:{\"plain\":\"\",\"disabled\":\"\"}},[_vm._v(\"上一步\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"plain\":\"\",\"disabled\":\"\"}},[_vm._v(\"下一步\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"plain\":\"\",\"disabled\":\"\"}},[_vm._v(\"清空重做\")])],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.5.0@vue-loader/lib/template-compiler?{\"id\":\"data-v-6a70c0d2\",\"hasScoped\":true,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.5.0@vue-loader/lib/selector.js?type=template&index=0!./src/components/canvas.vue\n// module id = null\n// module chunks = ","<template>\r\n  <div id=\"container\">\r\n    <div id=\"p-container\" class=\"container\">\r\n    </div>\r\n    <div id=\"images-back\">\r\n      <img src=\"/static/img/cup-back.png\" />\r\n    </div>\r\n        <div id=\"images-front\">\r\n      <img src=\"/static/img/cup-front.png\" />\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import * as THREE from 'three'\r\n  export default {\r\n    name: 'preview',\r\n    data () {\r\n      return {\r\n        scene: null,\r\n        camera: null,\r\n        renderer: null\r\n      }\r\n    },\r\n    methods: {\r\n      initScene () {\r\n        const container = document.getElementById('p-container')\r\n        this.scene = new THREE.Scene()\r\n        // this.scene.background = new THREE.Color()\r\n        this.camera = new THREE.PerspectiveCamera(45, 225 / 475, 1, 2000)\r\n        this.camera.position.y = 400\r\n        this.scene.add(this.camera)\r\n        this.renderer = new THREE.WebGLRenderer({alpha: true})\r\n        this.renderer.setPixelRatio(window.devicePixelRatio)\r\n        this.renderer.setSize(225, 475)\r\n        container.appendChild(this.renderer.domElement)\r\n        const ambientLight = new THREE.AmbientLight(0xffffff, 1)\r\n        this.scene.add(ambientLight)\r\n      },\r\n      renderCup () {\r\n        const cylinderGeo = new THREE.CylinderGeometry(155, 128, 585, 40, 5, true)\r\n        const texture = new THREE.TextureLoader().load('/static/img/bg1.png', (tex) => {\r\n          texture.wrapS = texture.wrapT = THREE.RepeatWrapping\r\n          texture.anisotropy = 16\r\n          const cylinderMat = new THREE.MeshPhongMaterial({\r\n            map: texture,\r\n            side: THREE.DoubleSide,\r\n            opacity: 0.8,\r\n            transparent: true\r\n          })\r\n          const cylinderMesh = new THREE.Mesh(cylinderGeo, cylinderMat)\r\n          cylinderMesh.position.set(0, -40, 0)\r\n          this.scene.add(cylinderMesh)\r\n          this.camera.position.z = 800\r\n          this.camera.lookAt(this.scene.position)\r\n          const animate = () => {\r\n            requestAnimationFrame(animate)\r\n            cylinderMesh.rotation.y += 0.01\r\n            this.renderer.render(this.scene, this.camera)\r\n          }\r\n          animate()\r\n          // this.renderer.render(this.scene, this.camera)\r\n          this.$root.bus.$on('canvasChange', (url) => {\r\n            this.updateTexture(cylinderMesh, url)\r\n          })\r\n        })\r\n      },\r\n      updateTexture (mesh, url) {\r\n        mesh.material.map = new THREE.TextureLoader().load(url)\r\n        mesh.material.needsUpdate = true\r\n      }\r\n    },\r\n    mounted () {\r\n      this.initScene()\r\n      this.renderCup()\r\n    }\r\n  }\r\n</script>\r\n\r\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\r\n<style scoped>\r\n  div#container {\r\n    width:100%;\r\n    height:100%;\r\n    position: relative;\r\n  }\r\n  div#p-container {\r\n    width: 225px;\r\n    height: 475px;\r\n    z-index: 2;\r\n    position: absolute;\r\n  }\r\n  div#images-back{\r\n    position: absolute;\r\n    z-index: 1;\r\n  }\r\n  div#images-front{\r\n    position: absolute;\r\n    z-index: 3;\r\n  }\r\n  canvas { \r\n    width: 100%; \r\n    height: 100%; \r\n  }\r\n</style>\n\n\n// WEBPACK FOOTER //\n// src/components/preview.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _vm._m(0,false,false)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"container\"}},[_c('div',{staticClass:\"container\",attrs:{\"id\":\"p-container\"}}),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"images-back\"}},[_c('img',{attrs:{\"src\":\"/static/img/cup-back.png\"}})]),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"images-front\"}},[_c('img',{attrs:{\"src\":\"/static/img/cup-front.png\"}})])])}]\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.5.0@vue-loader/lib/template-compiler?{\"id\":\"data-v-4b05c604\",\"hasScoped\":true,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.5.0@vue-loader/lib/selector.js?type=template&index=0!./src/components/preview.vue\n// module id = null\n// module chunks = ","<template>\r\n  <div class=\"cup\">\r\n    <el-popover ref=\"bg-popup\" placement= \"right\" trigger= \"click\" width=\"400\" v-model=\"bgListVisible\">\r\n      <el-row :gutter=\"24\">\r\n        <el-col :span=\"12\" v-for=\"(item, index) in bgList\" :key=\"index\">\r\n          <el-button @click=\"changeBackground(index)\">\r\n            <img :src=\"item.url\" :alt=\"`背景图${index}`\">\r\n          </el-button>\r\n        </el-col>\r\n      </el-row>\r\n    </el-popover>\r\n    <el-popover ref=\"layout-popup\" placement= \"right\" trigger= \"click\" width=\"400\"  v-model=\"layoutListVisible\">\r\n      <el-row :gutter=\"24\">\r\n        <el-col :span=\"12\" v-for=\"(item, index) in layoutList\" :key=\"index\">\r\n          <el-button @click=\"changeLayout(index)\">\r\n            <img :src=\"item.url\" :alt=\"`layout${index}`\">\r\n          </el-button>\r\n        </el-col>\r\n      </el-row>\r\n    </el-popover>\r\n    <el-container>\r\n      <el-aside>\r\n        <ul>\r\n          <li>\r\n            <el-button plain v-popover:bg-popup>更换背景</el-button>\r\n          </li>\r\n          <li>\r\n            <el-button plain v-popover:layout-popup>更换布局</el-button>\r\n          </li>\r\n        </ul>\r\n      </el-aside>\r\n      <el-main>\r\n        <my-canvas></my-canvas>\r\n      </el-main>\r\n      <el-aside>\r\n        <preview />\r\n        <!-- <img src=\"/static/img/tervis2.png\" alt=\"杯子\"> -->\r\n      </el-aside>\r\n    </el-container>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import myCanvas from './canvas'\r\n  import preview from './preview'\r\n  const bl = require('../model/bg-list.json')\r\n  const ll = require('../model/layout-list.json')\r\n  export default {\r\n    name: 'cup',\r\n    components: {\r\n      myCanvas,\r\n      preview\r\n    },\r\n    methods: {\r\n      changeBackground (index) {\r\n        this.bgUrl = this.bgList[index].url\r\n        this.bgListVisible = false\r\n        this.$root.bus.$emit('bgChange', this.bgUrl)\r\n      },\r\n      changeLayout (index) {\r\n        this.layout = this.layoutList[index].layout\r\n        this.layoutListVisible = false\r\n        this.$root.bus.$emit('layoutChange', this.layout)\r\n      }\r\n    },\r\n    beforeMount () {\r\n      this.bgList = bl\r\n      this.layoutList = ll\r\n    },\r\n    mounted () {\r\n      this.changeBackground(0)\r\n    },\r\n    data () {\r\n      return {\r\n        bgListVisible: false,\r\n        bgList: [],\r\n        bgUrl: '',\r\n        layoutListVisible: false,\r\n        layoutList: [],\r\n        layout: {}\r\n      }\r\n    }\r\n  }\r\n</script>\r\n\r\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\r\n<style scoped>\r\n  li {\r\n    list-style-type: none;\r\n  }\r\n  img {\r\n    width: 100%;\r\n    height: auto;\r\n  }\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/cup.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"cup\"},[_c('el-popover',{ref:\"bg-popup\",attrs:{\"placement\":\"right\",\"trigger\":\"click\",\"width\":\"400\"},model:{value:(_vm.bgListVisible),callback:function ($$v) {_vm.bgListVisible=$$v},expression:\"bgListVisible\"}},[_c('el-row',{attrs:{\"gutter\":24}},_vm._l((_vm.bgList),function(item,index){return _c('el-col',{key:index,attrs:{\"span\":12}},[_c('el-button',{on:{\"click\":function($event){_vm.changeBackground(index)}}},[_c('img',{attrs:{\"src\":item.url,\"alt\":(\"背景图\" + index)}})])],1)}))],1),_vm._v(\" \"),_c('el-popover',{ref:\"layout-popup\",attrs:{\"placement\":\"right\",\"trigger\":\"click\",\"width\":\"400\"},model:{value:(_vm.layoutListVisible),callback:function ($$v) {_vm.layoutListVisible=$$v},expression:\"layoutListVisible\"}},[_c('el-row',{attrs:{\"gutter\":24}},_vm._l((_vm.layoutList),function(item,index){return _c('el-col',{key:index,attrs:{\"span\":12}},[_c('el-button',{on:{\"click\":function($event){_vm.changeLayout(index)}}},[_c('img',{attrs:{\"src\":item.url,\"alt\":(\"layout\" + index)}})])],1)}))],1),_vm._v(\" \"),_c('el-container',[_c('el-aside',[_c('ul',[_c('li',[_c('el-button',{directives:[{name:\"popover\",rawName:\"v-popover:bg-popup\",arg:\"bg-popup\"}],attrs:{\"plain\":\"\"}},[_vm._v(\"更换背景\")])],1),_vm._v(\" \"),_c('li',[_c('el-button',{directives:[{name:\"popover\",rawName:\"v-popover:layout-popup\",arg:\"layout-popup\"}],attrs:{\"plain\":\"\"}},[_vm._v(\"更换布局\")])],1)])]),_vm._v(\" \"),_c('el-main',[_c('my-canvas')],1),_vm._v(\" \"),_c('el-aside',[_c('preview')],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.5.0@vue-loader/lib/template-compiler?{\"id\":\"data-v-b72494fa\",\"hasScoped\":true,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.5.0@vue-loader/lib/selector.js?type=template&index=0!./src/components/cup.vue\n// module id = null\n// module chunks = ","<template>\r\n  <div id=\"app\">\r\n    <cup />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport cup from './components/cup'\r\n// import preview from './components/preview'\r\n\r\nexport default {\r\n  name: 'app',\r\n  components: {\r\n    cup\r\n  }\r\n}\r\n</script>\r\n\r\n<style>\r\n#app {\r\n  font-family: 'Avenir', Helvetica, Arial, sans-serif;\r\n  -webkit-font-smoothing: antialiased;\r\n  -moz-osx-font-smoothing: grayscale;\r\n  text-align: center;\r\n  color: #2c3e50;\r\n  margin-top: 60px;\r\n}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/App.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('cup')],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.5.0@vue-loader/lib/template-compiler?{\"id\":\"data-v-bee39478\",\"hasScoped\":false,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.5.0@vue-loader/lib/selector.js?type=template&index=0!./src/App.vue\n// module id = null\n// module chunks = ","// The Vue build version to load with the `import` command\r\n// (runtime-only or standalone) has been set in webpack.base.conf with an alias.\r\nimport Vue from 'vue'\r\nimport ElementUI from 'element-ui'\r\nimport 'element-ui/lib/theme-chalk/index.css'\r\nimport App from './App'\r\n\r\nVue.config.productionTip = false\r\nVue.use(ElementUI)\r\n/* eslint-disable no-new */\r\nnew Vue({\r\n  el: '#app',\r\n  template: '<App/>',\r\n  components: { App },\r\n  data: {\r\n    bus: new Vue()\r\n  }\r\n})\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.js"],"sourceRoot":""}